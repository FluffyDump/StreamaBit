2024-11-07 00:09:03.412 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:09:03.413 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:09:03.414 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:09:03.414 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:09:03.415 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:09:03.415 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:09:03.416 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:09:03.417 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:09:03.417 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:09:03.417 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:09:03.417 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:09:03.417 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:09:03.418 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:09:03.418 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:09:03.418 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:09:03.419 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:09:03.440 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:09:03.462 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000013A25C9C360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000013A26064950>
    └ <sqlalchemy.engine.base.Connection object at 0x0000013A2784F550>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000013A2787BBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000013A21F64860>
    └ <WorkerThread(AnyIO worker thread, started 33696)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000013A2776C400>
    └ <WorkerThread(AnyIO worker thread, started 33696)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x0000013A276C2660>, db=<sqlalchemy.orm.session.Session object at 0x0000013A277178...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000013A276C7D40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x0000013A27717850>
           │             └ <function remove_user at 0x0000013A2734EC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 138, in remove_user
    shared_crud.commit(db)
    │           │      └ <sqlalchemy.orm.session.Session object at 0x0000013A27717850>
    │           └ <function commit at 0x0000013A2734EA20>
    └ <module 'app.crud.shared_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\shared...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\shared_crud.py", line 7, in commit
    return db.commit()
           │  └ <function Session.commit at 0x0000013A25F699E0>
           └ <sqlalchemy.orm.session.Session object at 0x0000013A27717850>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000013A25F68AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000013A262975C0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000013A262975C0>
                └ <function SessionTransaction.commit at 0x0000013A25F68900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000013A25F687C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000013A262975C0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000013A262975C0>
                └ <function SessionTransaction._prepare_impl at 0x0000013A25F68720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000013A25F74900>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000013A27717850>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000013A262975C0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000013A25F74AE0>
    └ <sqlalchemy.orm.session.Session object at 0x0000013A27717850>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000013A278BF400>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000013A25F593A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000013A2785FF50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000013A2785FF50>
    │   └ <function SaveUpdateAll.execute at 0x0000013A25F59EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000013A25F05A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x0000013A25F500E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x0000013A25BD8360>
        └ <sqlalchemy.engine.base.Connection object at 0x0000013A2784F550>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x0000013A278BE8D0>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000013A25BD8680>
           └ <sqlalchemy.engine.base.Connection object at 0x0000013A2784F550>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000013A25BD8860>
          └ <sqlalchemy.engine.base.Connection object at 0x0000013A2784F550>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000013A25BD8900>
           └ <sqlalchemy.engine.base.Connection object at 0x0000013A2784F550>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000013A25BD8B80>
    └ <sqlalchemy.engine.base.Connection object at 0x0000013A2784F550>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000013A25C9C360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000013A26064950>
    └ <sqlalchemy.engine.base.Connection object at 0x0000013A2784F550>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000013A2787BBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-11-07 00:10:29.945 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:10:29.946 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:10:29.947 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:10:29.947 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:10:29.947 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:10:29.947 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:10:29.947 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:10:29.948 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:10:29.948 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:10:29.948 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:10:29.948 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:10:29.949 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:10:29.949 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:10:29.949 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:10:29.949 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:10:29.949 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:10:29.973 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:10:30.008 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000142689EC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000014268DB4510>
    └ <sqlalchemy.engine.base.Connection object at 0x000001426A59F010>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001426A5CFBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000014264C44860>
    └ <WorkerThread(AnyIO worker thread, started 21952)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001426A4B8400>
    └ <WorkerThread(AnyIO worker thread, started 21952)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001426A412660>, db=<sqlalchemy.orm.session.Session object at 0x0000014268F007...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001426A459300>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x0000014268F007D0>
           │             └ <function remove_user at 0x00000142690CEC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 138, in remove_user
    shared_crud.commit(db)
    │           │      └ <sqlalchemy.orm.session.Session object at 0x0000014268F007D0>
    │           └ <function commit at 0x00000142690CEA20>
    └ <module 'app.crud.shared_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\shared...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\shared_crud.py", line 7, in commit
    return db.commit()
           │  └ <function Session.commit at 0x0000014268CB99E0>
           └ <sqlalchemy.orm.session.Session object at 0x0000014268F007D0>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000014268CB8AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001426A454DC0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001426A454DC0>
                └ <function SessionTransaction.commit at 0x0000014268CB8900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000014268CB87C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001426A454DC0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001426A454DC0>
                └ <function SessionTransaction._prepare_impl at 0x0000014268CB8720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000014268CC4900>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000014268F007D0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001426A454DC0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000014268CC4AE0>
    └ <sqlalchemy.orm.session.Session object at 0x0000014268F007D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001426A60F400>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000014268CA93A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001426A5AF6D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001426A5AF6D0>
    │   └ <function SaveUpdateAll.execute at 0x0000014268CA9EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000014268C55A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x0000014268CA00E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x0000014268928360>
        └ <sqlalchemy.engine.base.Connection object at 0x000001426A59F010>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x000001426A60E850>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000014268928680>
           └ <sqlalchemy.engine.base.Connection object at 0x000001426A59F010>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000014268928860>
          └ <sqlalchemy.engine.base.Connection object at 0x000001426A59F010>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000014268928900>
           └ <sqlalchemy.engine.base.Connection object at 0x000001426A59F010>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000014268928B80>
    └ <sqlalchemy.engine.base.Connection object at 0x000001426A59F010>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000142689EC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000014268DB4510>
    └ <sqlalchemy.engine.base.Connection object at 0x000001426A59F010>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001426A5CFBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-11-07 00:25:01.702 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:25:01.703 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:25:01.704 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:25:01.704 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:25:01.705 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:25:01.705 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:25:01.705 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:25:01.705 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:25:01.706 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:25:01.706 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:25:01.706 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:25:01.706 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:25:01.707 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:25:01.707 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:25:01.707 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:25:01.707 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:25:01.729 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:25:01.752 | ERROR    | app.services.user_service:remove_user:143 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001BE7FACC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001BE7FE94850>
    └ <sqlalchemy.engine.base.Connection object at 0x000001BE011E1A50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001BE016BBAE0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001BE7BCF4860>
    └ <WorkerThread(AnyIO worker thread, started 16448)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001BE0127C400>
    └ <WorkerThread(AnyIO worker thread, started 16448)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001BE011D2660>, db=<sqlalchemy.orm.session.Session object at 0x000001BE0120B8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001BE012277C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001BE0120B890>
           │             └ <function remove_user at 0x000001BE001CEC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 138, in remove_user
    shared_crud.flush(db)
    │           │     └ <sqlalchemy.orm.session.Session object at 0x000001BE0120B890>
    │           └ <function flush at 0x000001BE001CE980>
    └ <module 'app.crud.shared_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\shared...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\shared_crud.py", line 4, in flush
    return db.flush()
           │  └ <function Session.flush at 0x000001BE7FDA4900>
           └ <sqlalchemy.orm.session.Session object at 0x000001BE0120B890>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001BE7FDA4AE0>
    └ <sqlalchemy.orm.session.Session object at 0x000001BE0120B890>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001BE016FEF80>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001BE7FD893A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001BE01214510>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001BE01214510>
    │   └ <function SaveUpdateAll.execute at 0x000001BE7FD89EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001BE7FD35A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x000001BE7FD800E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x000001BE7FA08360>
        └ <sqlalchemy.engine.base.Connection object at 0x000001BE011E1A50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x000001BE016FE3D0>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001BE7FA08680>
           └ <sqlalchemy.engine.base.Connection object at 0x000001BE011E1A50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001BE7FA08860>
          └ <sqlalchemy.engine.base.Connection object at 0x000001BE011E1A50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001BE7FA08900>
           └ <sqlalchemy.engine.base.Connection object at 0x000001BE011E1A50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001BE7FA08B80>
    └ <sqlalchemy.engine.base.Connection object at 0x000001BE011E1A50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001BE7FACC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001BE7FE94850>
    └ <sqlalchemy.engine.base.Connection object at 0x000001BE011E1A50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001BE016BBAE0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-11-07 00:26:49.128 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:26:49.129 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:26:49.130 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:26:49.131 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:26:49.131 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:26:49.132 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:26:49.132 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:26:49.132 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:26:49.132 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:26:49.132 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:26:49.132 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:26:49.133 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:26:49.133 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:26:49.133 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:26:49.133 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:26:49.134 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:26:49.156 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:26:49.179 | ERROR    | app.crud.user_crud:delete:147 - Exception with user_id=80: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000017C80AEC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000017C80EB47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000017C826BFBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 137, in delete
    db.commit()
    │  └ <function Session.commit at 0x0000017C80DB99E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000017C80DB8AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
                └ <function SessionTransaction.commit at 0x0000017C80DB8900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000017C80DB87C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
                └ <function SessionTransaction._prepare_impl at 0x0000017C80DB8720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000017C80DC4900>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000017C80DC4AE0>
    └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000017C82703200>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000017C80DA93A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000017C82215650>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000017C82215650>
    │   └ <function SaveUpdateAll.execute at 0x0000017C80DA9EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000017C80D55A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x0000017C80DA00E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x0000017C80A28360>
        └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x0000017C82702510>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000017C80A28680>
           └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000017C80A28860>
          └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000017C80A28900>
           └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000017C80A28B80>
    └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000017C80AEC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000017C80EB47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000017C826BFBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000017CFCD44860>
    └ <WorkerThread(AnyIO worker thread, started 30248)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000017C82278400>
    └ <WorkerThread(AnyIO worker thread, started 30248)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x0000017C811FA700>, db=<sqlalchemy.orm.session.Session object at 0x0000017C822233...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000017C82221AC0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
           │             └ <function remove_user at 0x0000017C811CEE80>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 137, in remove_user
    user_crud.delete(db=db, user_id=db_user.user_id)
    │         │         │           │       └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000017C81087600>
    │         │         │           └ <app.models.database.User object at 0x0000017C8269F950>
    │         │         └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
    │         └ <function delete at 0x0000017C811CEAC0>
    └ <module 'app.crud.user_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\user_cru...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 141, in delete
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 00:26:49.202 | ERROR    | app.services.user_service:remove_user:143 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000017C80AEC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000017C80EB47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000017C826BFBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 137, in delete
    db.commit()
    │  └ <function Session.commit at 0x0000017C80DB99E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000017C80DB8AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
                └ <function SessionTransaction.commit at 0x0000017C80DB8900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000017C80DB87C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
                └ <function SessionTransaction._prepare_impl at 0x0000017C80DB8720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000017C80DC4900>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000017C82640FF0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000017C80DC4AE0>
    └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000017C82703200>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000017C80DA93A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000017C82215650>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000017C82215650>
    │   └ <function SaveUpdateAll.execute at 0x0000017C80DA9EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000017C80D55A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x0000017C80DA00E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x0000017C80A28360>
        └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x0000017C82702510>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000017C80A28680>
           └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000017C80A28860>
          └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000017C80A28900>
           └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000017C80A28B80>
    └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000017C80AEC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000017C80EB47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000017C8268ED50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000017C826BFBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 141, in delete
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000017CFCD44860>
    └ <WorkerThread(AnyIO worker thread, started 30248)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000017C82278400>
    └ <WorkerThread(AnyIO worker thread, started 30248)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x0000017C811FA700>, db=<sqlalchemy.orm.session.Session object at 0x0000017C822233...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000017C82221AC0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
           │             └ <function remove_user at 0x0000017C811CEE80>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 137, in remove_user
    user_crud.delete(db=db, user_id=db_user.user_id)
    │         │         │           │       └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000017C81087600>
    │         │         │           └ <app.models.database.User object at 0x0000017C8269F950>
    │         │         └ <sqlalchemy.orm.session.Session object at 0x0000017C82223350>
    │         └ <function delete at 0x0000017C811CEAC0>
    └ <module 'app.crud.user_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\user_cru...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 148, in delete
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 00:30:18.734 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:30:18.735 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:30:18.736 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:30:18.736 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:30:18.736 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:30:18.737 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:30:18.737 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:30:18.737 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:30:18.737 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:30:18.738 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:30:18.738 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:30:18.738 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:30:18.739 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:30:18.739 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:30:18.739 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:30:18.739 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:30:18.761 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:30:18.766 | INFO     | app.crud.user_crud:delete:130 - Attempting to remove user account
2024-11-07 00:30:18.768 | INFO     | app.crud.user_crud:delete:138 - User prepared for account removal, waiting for transaction commit
2024-11-07 00:30:18.783 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000140F4C2C360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000140F4FF47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000140F67DF2D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000140F680BBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000140F0ED4860>
    └ <WorkerThread(AnyIO worker thread, started 27356)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x00000140F66F84A0>
    └ <WorkerThread(AnyIO worker thread, started 27356)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x00000140F6652660>, db=<sqlalchemy.orm.session.Session object at 0x00000140F66744...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x00000140F6691880>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x00000140F6674450>
           │             └ <function remove_user at 0x00000140F530EC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 138, in remove_user
    shared_crud.commit(db)
    │           │      └ <sqlalchemy.orm.session.Session object at 0x00000140F6674450>
    │           └ <function commit at 0x00000140F530EA20>
    └ <module 'app.crud.shared_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\shared...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\shared_crud.py", line 7, in commit
    return db.commit()
           │  └ <function Session.commit at 0x00000140F4EF99E0>
           └ <sqlalchemy.orm.session.Session object at 0x00000140F6674450>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x00000140F4EF8AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000140F66FF5C0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000140F66FF5C0>
                └ <function SessionTransaction.commit at 0x00000140F4EF8900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x00000140F4EF87C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000140F66FF5C0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000140F66FF5C0>
                └ <function SessionTransaction._prepare_impl at 0x00000140F4EF8720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x00000140F4F04900>
    │    └ <sqlalchemy.orm.session.Session object at 0x00000140F6674450>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000140F66FF5C0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x00000140F4F04AE0>
    └ <sqlalchemy.orm.session.Session object at 0x00000140F6674450>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000140F684F500>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000140F4EE93A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000140F6657B10>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000140F6657B10>
    │   └ <function SaveUpdateAll.execute at 0x00000140F4EE9EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x00000140F4E95A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x00000140F4EE00E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x00000140F4B68360>
        └ <sqlalchemy.engine.base.Connection object at 0x00000140F67DF2D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x00000140F684E950>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000140F4B68680>
           └ <sqlalchemy.engine.base.Connection object at 0x00000140F67DF2D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000140F4B68860>
          └ <sqlalchemy.engine.base.Connection object at 0x00000140F67DF2D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000140F4B68900>
           └ <sqlalchemy.engine.base.Connection object at 0x00000140F67DF2D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000140F4B68B80>
    └ <sqlalchemy.engine.base.Connection object at 0x00000140F67DF2D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000140F4C2C360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000140F4FF47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000140F67DF2D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000140F680BBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-11-07 00:36:00.296 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:36:00.297 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:36:00.298 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:36:00.298 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:36:00.298 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:36:00.298 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:36:00.299 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:36:00.299 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:36:00.299 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:36:00.299 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:36:00.299 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:36:00.299 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:36:00.300 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:36:00.300 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:36:00.300 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:36:00.300 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:36:00.321 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:36:00.326 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 00:36:00.327 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 00:36:00.343 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000274811EC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000274815B47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000027482D9E910>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000027482DCFBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000274FD4B4860>
    └ <WorkerThread(AnyIO worker thread, started 32208)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000027482CB84A0>
    └ <WorkerThread(AnyIO worker thread, started 32208)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x0000027482C12660>, db=<sqlalchemy.orm.session.Session object at 0x0000027482C4B8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000027482CC2EC0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x0000027482C4B890>
           │             └ <function remove_user at 0x000002748289EC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 138, in remove_user
    shared_crud.commit(db)
    │           │      └ <sqlalchemy.orm.session.Session object at 0x0000027482C4B890>
    │           └ <function commit at 0x000002748289EA20>
    └ <module 'app.crud.shared_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\shared...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\shared_crud.py", line 7, in commit
    return db.commit()
           │  └ <function Session.commit at 0x00000274814B99E0>
           └ <sqlalchemy.orm.session.Session object at 0x0000027482C4B890>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x00000274814B8AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000027482C54DC0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000027482C54DC0>
                └ <function SessionTransaction.commit at 0x00000274814B8900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x00000274814B87C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000027482C54DC0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000027482C54DC0>
                └ <function SessionTransaction._prepare_impl at 0x00000274814B8720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x00000274814C4900>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000027482C4B890>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000027482C54DC0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x00000274814C4AE0>
    └ <sqlalchemy.orm.session.Session object at 0x0000027482C4B890>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000027482C203C0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000274814A93A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000027482D9DE90>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000027482D9DE90>
    │   └ <function SaveUpdateAll.execute at 0x00000274814A9EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000027481455A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x00000274814A00E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x0000027481128360>
        └ <sqlalchemy.engine.base.Connection object at 0x0000027482D9E910>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x0000027482E16610>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000027481128680>
           └ <sqlalchemy.engine.base.Connection object at 0x0000027482D9E910>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000027481128860>
          └ <sqlalchemy.engine.base.Connection object at 0x0000027482D9E910>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000027481128900>
           └ <sqlalchemy.engine.base.Connection object at 0x0000027482D9E910>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000027481128B80>
    └ <sqlalchemy.engine.base.Connection object at 0x0000027482D9E910>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000274811EC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000274815B47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000027482D9E910>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000027482DCFBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-11-07 00:45:13.336 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:45:13.337 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:45:13.337 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:45:13.337 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:45:13.337 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:45:13.338 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:45:13.338 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:45:13.338 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:45:13.338 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:45:13.338 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:45:13.338 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:45:13.339 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:45:13.339 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:45:13.339 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:45:13.339 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:45:13.339 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:45:13.362 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:45:13.367 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 00:45:13.368 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 00:45:13.387 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002D26BF0C360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000002D26C2D47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000002D26DABE610>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000002D26DAEBBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000002D268164860>
    └ <WorkerThread(AnyIO worker thread, started 12764)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002D26D9DC4A0>
    └ <WorkerThread(AnyIO worker thread, started 12764)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000002D26D932660>, db=<sqlalchemy.orm.session.Session object at 0x000002D26D98B1...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002D26D98B2C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000002D26D98B110>
           │             └ <function remove_user at 0x000002D26D5BEC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 138, in remove_user
    shared_crud.commit(db)
    │           │      └ <sqlalchemy.orm.session.Session object at 0x000002D26D98B110>
    │           └ <function commit at 0x000002D26D5BEA20>
    └ <module 'app.crud.shared_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\shared...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\shared_crud.py", line 7, in commit
    return db.commit()
           │  └ <function Session.commit at 0x000002D26C1D99E0>
           └ <sqlalchemy.orm.session.Session object at 0x000002D26D98B110>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000002D26C1D8AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002D26DA710E0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002D26DA710E0>
                └ <function SessionTransaction.commit at 0x000002D26C1D8900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000002D26C1D87C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002D26DA710E0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002D26DA710E0>
                └ <function SessionTransaction._prepare_impl at 0x000002D26C1D8720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000002D26C1E4900>
    │    └ <sqlalchemy.orm.session.Session object at 0x000002D26D98B110>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002D26DA710E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000002D26C1E4AE0>
    └ <sqlalchemy.orm.session.Session object at 0x000002D26D98B110>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000002D26DB2F300>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000002D26C1C93A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002D26DACFC90>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002D26DACFC90>
    │   └ <function SaveUpdateAll.execute at 0x000002D26C1C9EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000002D26C175A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x000002D26C1C00E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x000002D26BE48360>
        └ <sqlalchemy.engine.base.Connection object at 0x000002D26DABE610>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x000002D26DB2E810>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000002D26BE48680>
           └ <sqlalchemy.engine.base.Connection object at 0x000002D26DABE610>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000002D26BE48860>
          └ <sqlalchemy.engine.base.Connection object at 0x000002D26DABE610>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000002D26BE48900>
           └ <sqlalchemy.engine.base.Connection object at 0x000002D26DABE610>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000002D26BE48B80>
    └ <sqlalchemy.engine.base.Connection object at 0x000002D26DABE610>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002D26BF0C360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000002D26C2D47D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000002D26DABE610>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000002D26DAEBBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-11-07 00:45:22.673 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:45:22.674 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:45:22.674 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:45:22.675 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:45:22.675 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:45:22.675 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:45:22.675 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:45:22.675 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:45:22.675 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:45:22.676 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:45:22.676 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:45:22.676 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:45:22.677 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:45:22.677 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:45:22.677 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:45:22.677 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:45:22.681 | ERROR    | app.crud.user_crud:get_authenticated_user:64 - Exception with username=First55Select, email=firstUser55@gmail.com: Could not determine join condition between parent/child tables on relationship User.sessions - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2423, in _determine_joins
    self.primaryjoin = join_condition(
    │                  └ <function join_condition at 0x0000015939BE2480>
    └ <sqlalchemy.orm.relationships.JoinCondition object at 0x000001593BA3B650>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\util.py", line 123, in join_condition
    return Join._join_condition(
           │    └ <classmethod(<function Join._join_condition at 0x0000015939DAC9A0>)>
           └ <class 'sqlalchemy.sql.selectable.Join'>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1380, in _join_condition
    raise exc.NoForeignKeysError(
          │   └ <class 'sqlalchemy.exc.NoForeignKeysError'>
          └ <module 'sqlalchemy.exc' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy\...

sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'user' and 'user_session'.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000159361E4860>
    └ <WorkerThread(AnyIO worker thread, started 31204)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001593BA2C400>
    └ <WorkerThread(AnyIO worker thread, started 31204)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001593B9825C0>, db=<sqlalchemy.orm.session.Session object at 0x000001593B9DB3...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001593B986700>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
           │             └ <function remove_user at 0x000001593B60EB60>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 128, in remove_user
    db_user = user_crud.get_authenticated_user(db=db, username=username, email=data.email, password_hash=data.password)
              │         │                         │            │               │    │                    │    └ 'Password1234$'
              │         │                         │            │               │    │                    └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            │               │    └ 'firstUser55@gmail.com'
              │         │                         │            │               └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            └ 'First55Select'
              │         │                         └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
              │         └ <function get_authenticated_user at 0x000001593B60E5C0>
              └ <module 'app.crud.user_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\user_cru...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 53, in get_authenticated_user
    query = db.query(models.User)
            │  │     │      └ <class 'app.models.database.User'>
            │  │     └ <module 'app.models.database' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\models\\datab...
            │  └ <function Session.query at 0x000001593A22B2E0>
            └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2952, in query
    return self._query_cls(entities, self, **kwargs)
           │    │          │         │       └ {}
           │    │          │         └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
           │    │          └ (<class 'app.models.database.User'>,)
           │    └ <class 'sqlalchemy.orm.query.Query'>
           └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 275, in __init__
    self._set_entities(entities)
    │    │             └ (<class 'app.models.database.User'>,)
    │    └ <function Query._set_entities at 0x000001593A164F40>
    └ <sqlalchemy.orm.query.Query object at 0x000001593B9970D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 287, in _set_entities
    self._raw_columns = [
    └ <sqlalchemy.orm.query.Query object at 0x000001593B9970D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in <listcomp>
    coercions.expect(
    │         └ <function expect at 0x0000015939BAC220>
    └ <module 'sqlalchemy.sql.coercions' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\s...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\coercions.py", line 389, in expect
    insp._post_inspect
    │    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x000001593A15D510>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1253, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
    │   │        │    │                    │    │    └ <Mapper at 0x159398b7910; User>
    │   │        │    │                    │    └ <function Mapper._post_inspect at 0x000001593A1611C0>
    │   │        │    │                    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x000001593A15D510>
    │   │        │    └ '_post_inspect'
    │   │        └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x000001593A15D510>
    │   └ <attribute '__dict__' of 'Mapper' objects>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2711, in _post_inspect
    self._check_configure()
    │    └ <function Mapper._check_configure at 0x000001593A160400>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2388, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001593A4C13D0>
    │                      └ <Mapper at 0x159398b7910; User>
    └ <function _configure_registries at 0x000001593A1640E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4204, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001593A164220>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4245, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001593A1602C0>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2405, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001593A020C20>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 584, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001593A132B60>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1644, in do_init
    self._setup_join_conditions()
    │    └ <function RelationshipProperty._setup_join_conditions at 0x000001593A132DE0>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1884, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
    │                           └ <class 'sqlalchemy.orm.relationships.JoinCondition'>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2310, in __init__
    self._determine_joins()
    │    └ <function JoinCondition._determine_joins at 0x000001593A133E20>
    └ <sqlalchemy.orm.relationships.JoinCondition object at 0x000001593BA3B650>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2444, in _determine_joins
    raise sa_exc.NoForeignKeysError(
          │      └ <class 'sqlalchemy.exc.NoForeignKeysError'>
          └ <module 'sqlalchemy.exc' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy\...

sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship User.sessions - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2024-11-07 00:45:22.770 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2423, in _determine_joins
    self.primaryjoin = join_condition(
    │                  └ <function join_condition at 0x0000015939BE2480>
    └ <sqlalchemy.orm.relationships.JoinCondition object at 0x000001593BA3B650>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\util.py", line 123, in join_condition
    return Join._join_condition(
           │    └ <classmethod(<function Join._join_condition at 0x0000015939DAC9A0>)>
           └ <class 'sqlalchemy.sql.selectable.Join'>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1380, in _join_condition
    raise exc.NoForeignKeysError(
          │   └ <class 'sqlalchemy.exc.NoForeignKeysError'>
          └ <module 'sqlalchemy.exc' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy\...

sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'user' and 'user_session'.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 53, in get_authenticated_user
    query = db.query(models.User)
            │  │     │      └ <class 'app.models.database.User'>
            │  │     └ <module 'app.models.database' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\models\\datab...
            │  └ <function Session.query at 0x000001593A22B2E0>
            └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2952, in query
    return self._query_cls(entities, self, **kwargs)
           │    │          │         │       └ {}
           │    │          │         └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
           │    │          └ (<class 'app.models.database.User'>,)
           │    └ <class 'sqlalchemy.orm.query.Query'>
           └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 275, in __init__
    self._set_entities(entities)
    │    │             └ (<class 'app.models.database.User'>,)
    │    └ <function Query._set_entities at 0x000001593A164F40>
    └ <sqlalchemy.orm.query.Query object at 0x000001593B9970D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 287, in _set_entities
    self._raw_columns = [
    └ <sqlalchemy.orm.query.Query object at 0x000001593B9970D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in <listcomp>
    coercions.expect(
    │         └ <function expect at 0x0000015939BAC220>
    └ <module 'sqlalchemy.sql.coercions' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\s...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\coercions.py", line 389, in expect
    insp._post_inspect
    │    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x000001593A15D510>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1253, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
    │   │        │    │                    │    │    └ <Mapper at 0x159398b7910; User>
    │   │        │    │                    │    └ <function Mapper._post_inspect at 0x000001593A1611C0>
    │   │        │    │                    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x000001593A15D510>
    │   │        │    └ '_post_inspect'
    │   │        └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x000001593A15D510>
    │   └ <attribute '__dict__' of 'Mapper' objects>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2711, in _post_inspect
    self._check_configure()
    │    └ <function Mapper._check_configure at 0x000001593A160400>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2388, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001593A4C13D0>
    │                      └ <Mapper at 0x159398b7910; User>
    └ <function _configure_registries at 0x000001593A1640E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4204, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001593A164220>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4245, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001593A1602C0>
    └ <Mapper at 0x159398b7910; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2405, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001593A020C20>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 584, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001593A132B60>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1644, in do_init
    self._setup_join_conditions()
    │    └ <function RelationshipProperty._setup_join_conditions at 0x000001593A132DE0>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1884, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
    │                           └ <class 'sqlalchemy.orm.relationships.JoinCondition'>
    └ <_RelationshipDeclared at 0x1593a4f5270; sessions>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2310, in __init__
    self._determine_joins()
    │    └ <function JoinCondition._determine_joins at 0x000001593A133E20>
    └ <sqlalchemy.orm.relationships.JoinCondition object at 0x000001593BA3B650>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2444, in _determine_joins
    raise sa_exc.NoForeignKeysError(
          │      └ <class 'sqlalchemy.exc.NoForeignKeysError'>
          └ <module 'sqlalchemy.exc' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy\...

sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship User.sessions - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000159361E4860>
    └ <WorkerThread(AnyIO worker thread, started 31204)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001593BA2C400>
    └ <WorkerThread(AnyIO worker thread, started 31204)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001593B9825C0>, db=<sqlalchemy.orm.session.Session object at 0x000001593B9DB3...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001593B986700>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
           │             └ <function remove_user at 0x000001593B60EB60>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 128, in remove_user
    db_user = user_crud.get_authenticated_user(db=db, username=username, email=data.email, password_hash=data.password)
              │         │                         │            │               │    │                    │    └ 'Password1234$'
              │         │                         │            │               │    │                    └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            │               │    └ 'firstUser55@gmail.com'
              │         │                         │            │               └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            └ 'First55Select'
              │         │                         └ <sqlalchemy.orm.session.Session object at 0x000001593B9DB310>
              │         └ <function get_authenticated_user at 0x000001593B60E5C0>
              └ <module 'app.crud.user_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\user_cru...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 65, in get_authenticated_user
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 00:46:13.250 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:46:13.251 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:46:13.251 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:46:13.251 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:46:13.252 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:46:13.252 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:46:13.252 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:46:13.252 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:46:13.253 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:46:13.253 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:46:13.253 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:46:13.253 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:46:13.253 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:46:13.254 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:46:13.254 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:46:13.254 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:46:13.276 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:46:13.281 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 00:46:13.283 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 00:46:13.299 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F5368AC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F536C74850>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F53845EE50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F53848FBC0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001F532AE4860>
    └ <WorkerThread(AnyIO worker thread, started 16656)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001F5383784A0>
    └ <WorkerThread(AnyIO worker thread, started 16656)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001F5382D2660>, db=<sqlalchemy.orm.session.Session object at 0x000001F53830B8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001F5383275C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001F53830B890>
           │             └ <function remove_user at 0x000001F537F5EC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 138, in remove_user
    shared_crud.commit(db)
    │           │      └ <sqlalchemy.orm.session.Session object at 0x000001F53830B890>
    │           └ <function commit at 0x000001F537F5EA20>
    └ <module 'app.crud.shared_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\shared...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\shared_crud.py", line 7, in commit
    return db.commit()
           │  └ <function Session.commit at 0x000001F536B799E0>
           └ <sqlalchemy.orm.session.Session object at 0x000001F53830B890>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2028, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001F536B78AE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F5382F10E0>
  File "<string>", line 2, in commit
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F5382F10E0>
                └ <function SessionTransaction.commit at 0x000001F536B78900>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001F536B787C0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F5382F10E0>
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F5382F10E0>
                └ <function SessionTransaction._prepare_impl at 0x000001F536B78720>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001F536B84900>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001F53830B890>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F5382F10E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4352, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001F536B84AE0>
    └ <sqlalchemy.orm.session.Session object at 0x000001F53830B890>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4487, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001F5384D3400>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 4448, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001F536B693A0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F53846F7D0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F53846F7D0>
    │   └ <function SaveUpdateAll.execute at 0x000001F536B69EE0>
    └ SaveUpdateAll(Mapper[UserSession(user_session)])
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001F536B15A80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\...
    └ <module 'sqlalchemy.util' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
    └ <function _emit_update_statements at 0x000001F536B600E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        │          └ <function Connection.execute at 0x000001F5367E8360>
        └ <sqlalchemy.engine.base.Connection object at 0x000001F53845EE50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Update object at 0x000001F5384D2A10>>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001F5367E8680>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F53845EE50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001F5367E8860>
          └ <sqlalchemy.engine.base.Connection object at 0x000001F53845EE50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001F5367E8900>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F53845EE50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001F5367E8B80>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F53845EE50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "fk_user_id" of relation "user_session" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "fk_user_id" of relation "user_session" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F5368AC360>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F536C74850>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F53845EE50>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'fk_user_id': None, 'user_session_session_id': 15}
    │      │       └ 'UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F53848FBC0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "fk_user_id" of relation "user_session" violates not-null constraint
DETAIL:  Failing row contains (15, 2024-11-06 13:16:04.68704+02, 127.0.0.1, null).

[SQL: UPDATE user_session SET fk_user_id=%(fk_user_id)s WHERE user_session.session_id = %(user_session_session_id)s]
[parameters: {'fk_user_id': None, 'user_session_session_id': 15}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-11-07 00:46:47.343 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:46:47.344 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:46:47.344 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:46:47.344 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:46:47.345 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:46:47.345 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:46:47.345 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:46:47.345 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:46:47.345 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:46:47.345 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:46:47.346 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:46:47.346 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:46:47.346 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:46:47.346 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:46:47.347 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:46:47.347 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:46:47.354 | ERROR    | app.crud.user_crud:get_authenticated_user:64 - Exception with username=First55Select, email=firstUser55@gmail.com: For many-to-one relationship UserSession.user, delete-orphan cascade is normally configured only on the "one" side of a one-to-many relationship, and not on the "many" side of a many-to-one or many-to-many relationship.  To force this relationship to allow a particular "User" object to be referenced by only a single "UserSession" object at a time via the UserSession.user relationship, which would allow delete-orphan cascade to take place in this direction, set the single_parent=True flag. (Background on this error at: https://sqlalche.me/e/20/bbf0)
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000027815BB4860>
    └ <WorkerThread(AnyIO worker thread, started 20464)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002781B4384A0>
    └ <WorkerThread(AnyIO worker thread, started 20464)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000002781B392660>, db=<sqlalchemy.orm.session.Session object at 0x000002781B3CB8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002781B446E80>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
           │             └ <function remove_user at 0x000002781B01EC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 128, in remove_user
    db_user = user_crud.get_authenticated_user(db=db, username=username, email=data.email, password_hash=data.password)
              │         │                         │            │               │    │                    │    └ 'Password1234$'
              │         │                         │            │               │    │                    └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            │               │    └ 'firstUser55@gmail.com'
              │         │                         │            │               └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            └ 'First55Select'
              │         │                         └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
              │         └ <function get_authenticated_user at 0x000002781B01E660>
              └ <module 'app.crud.user_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\user_cru...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 53, in get_authenticated_user
    query = db.query(models.User)
            │  │     │      └ <class 'app.models.database.User'>
            │  │     └ <module 'app.models.database' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\models\\datab...
            │  └ <function Session.query at 0x0000027819C3B2E0>
            └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2952, in query
    return self._query_cls(entities, self, **kwargs)
           │    │          │         │       └ {}
           │    │          │         └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
           │    │          └ (<class 'app.models.database.User'>,)
           │    └ <class 'sqlalchemy.orm.query.Query'>
           └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 275, in __init__
    self._set_entities(entities)
    │    │             └ (<class 'app.models.database.User'>,)
    │    └ <function Query._set_entities at 0x0000027819B74F40>
    └ <sqlalchemy.orm.query.Query object at 0x000002781B3E7BD0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 287, in _set_entities
    self._raw_columns = [
    └ <sqlalchemy.orm.query.Query object at 0x000002781B3E7BD0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in <listcomp>
    coercions.expect(
    │         └ <function expect at 0x00000278195BC220>
    └ <module 'sqlalchemy.sql.coercions' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\s...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\coercions.py", line 389, in expect
    insp._post_inspect
    │    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x0000027819B6D550>
    └ <Mapper at 0x27819f21590; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1253, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
    │   │        │    │                    │    │    └ <Mapper at 0x27819f21590; User>
    │   │        │    │                    │    └ <function Mapper._post_inspect at 0x0000027819B711C0>
    │   │        │    │                    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x0000027819B6D550>
    │   │        │    └ '_post_inspect'
    │   │        └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x0000027819B6D550>
    │   └ <attribute '__dict__' of 'Mapper' objects>
    └ <Mapper at 0x27819f21590; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2711, in _post_inspect
    self._check_configure()
    │    └ <function Mapper._check_configure at 0x0000027819B70400>
    └ <Mapper at 0x27819f21590; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2388, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x0000027819E84F10>
    │                      └ <Mapper at 0x27819f21590; User>
    └ <function _configure_registries at 0x0000027819B740E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4204, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x0000027819B74220>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4245, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x0000027819B702C0>
    └ <Mapper at 0x27819f4cf50; UserSession>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2405, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x0000027819A30C20>
    └ <_RelationshipDeclared at 0x27819f42490; user>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 584, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x0000027819B42B60>
    └ <_RelationshipDeclared at 0x27819f42490; user>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1645, in do_init
    self._check_cascade_settings(self._cascade)
    │    │                       │    └ CascadeOptions('delete,delete-orphan,expunge,merge,refresh-expire,save-update')
    │    │                       └ <_RelationshipDeclared at 0x27819f42490; user>
    │    └ <function RelationshipProperty._check_cascade_settings at 0x0000027819B43380>
    └ <_RelationshipDeclared at 0x27819f42490; user>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1988, in _check_cascade_settings
    raise sa_exc.ArgumentError(
          │      └ <class 'sqlalchemy.exc.ArgumentError'>
          └ <module 'sqlalchemy.exc' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy\...

sqlalchemy.exc.ArgumentError: For many-to-one relationship UserSession.user, delete-orphan cascade is normally configured only on the "one" side of a one-to-many relationship, and not on the "many" side of a many-to-one or many-to-many relationship.  To force this relationship to allow a particular "User" object to be referenced by only a single "UserSession" object at a time via the UserSession.user relationship, which would allow delete-orphan cascade to take place in this direction, set the single_parent=True flag. (Background on this error at: https://sqlalche.me/e/20/bbf0)
2024-11-07 00:46:47.371 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 53, in get_authenticated_user
    query = db.query(models.User)
            │  │     │      └ <class 'app.models.database.User'>
            │  │     └ <module 'app.models.database' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\models\\datab...
            │  └ <function Session.query at 0x0000027819C3B2E0>
            └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py", line 2952, in query
    return self._query_cls(entities, self, **kwargs)
           │    │          │         │       └ {}
           │    │          │         └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
           │    │          └ (<class 'app.models.database.User'>,)
           │    └ <class 'sqlalchemy.orm.query.Query'>
           └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 275, in __init__
    self._set_entities(entities)
    │    │             └ (<class 'app.models.database.User'>,)
    │    └ <function Query._set_entities at 0x0000027819B74F40>
    └ <sqlalchemy.orm.query.Query object at 0x000002781B3E7BD0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 287, in _set_entities
    self._raw_columns = [
    └ <sqlalchemy.orm.query.Query object at 0x000002781B3E7BD0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in <listcomp>
    coercions.expect(
    │         └ <function expect at 0x00000278195BC220>
    └ <module 'sqlalchemy.sql.coercions' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\s...
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\coercions.py", line 389, in expect
    insp._post_inspect
    │    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x0000027819B6D550>
    └ <Mapper at 0x27819f21590; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1253, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
    │   │        │    │                    │    │    └ <Mapper at 0x27819f21590; User>
    │   │        │    │                    │    └ <function Mapper._post_inspect at 0x0000027819B711C0>
    │   │        │    │                    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x0000027819B6D550>
    │   │        │    └ '_post_inspect'
    │   │        └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x0000027819B6D550>
    │   └ <attribute '__dict__' of 'Mapper' objects>
    └ <Mapper at 0x27819f21590; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2711, in _post_inspect
    self._check_configure()
    │    └ <function Mapper._check_configure at 0x0000027819B70400>
    └ <Mapper at 0x27819f21590; User>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2388, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x0000027819E84F10>
    │                      └ <Mapper at 0x27819f21590; User>
    └ <function _configure_registries at 0x0000027819B740E0>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4204, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x0000027819B74220>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4245, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x0000027819B702C0>
    └ <Mapper at 0x27819f4cf50; UserSession>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2405, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x0000027819A30C20>
    └ <_RelationshipDeclared at 0x27819f42490; user>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 584, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x0000027819B42B60>
    └ <_RelationshipDeclared at 0x27819f42490; user>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1645, in do_init
    self._check_cascade_settings(self._cascade)
    │    │                       │    └ CascadeOptions('delete,delete-orphan,expunge,merge,refresh-expire,save-update')
    │    │                       └ <_RelationshipDeclared at 0x27819f42490; user>
    │    └ <function RelationshipProperty._check_cascade_settings at 0x0000027819B43380>
    └ <_RelationshipDeclared at 0x27819f42490; user>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1988, in _check_cascade_settings
    raise sa_exc.ArgumentError(
          │      └ <class 'sqlalchemy.exc.ArgumentError'>
          └ <module 'sqlalchemy.exc' from 'C:\\Users\\tomas\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\sqlalchemy\...

sqlalchemy.exc.ArgumentError: For many-to-one relationship UserSession.user, delete-orphan cascade is normally configured only on the "one" side of a one-to-many relationship, and not on the "many" side of a many-to-one or many-to-many relationship.  To force this relationship to allow a particular "User" object to be referenced by only a single "UserSession" object at a time via the UserSession.user relationship, which would allow delete-orphan cascade to take place in this direction, set the single_parent=True flag. (Background on this error at: https://sqlalche.me/e/20/bbf0)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000027815BB4860>
    └ <WorkerThread(AnyIO worker thread, started 20464)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002781B4384A0>
    └ <WorkerThread(AnyIO worker thread, started 20464)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000002781B392660>, db=<sqlalchemy.orm.session.Session object at 0x000002781B3CB8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002781B446E80>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
           │             │              │            └ 'First55Select'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
           │             └ <function remove_user at 0x000002781B01EC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 128, in remove_user
    db_user = user_crud.get_authenticated_user(db=db, username=username, email=data.email, password_hash=data.password)
              │         │                         │            │               │    │                    │    └ 'Password1234$'
              │         │                         │            │               │    │                    └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            │               │    └ 'firstUser55@gmail.com'
              │         │                         │            │               └ UserDelete(email='firstUser55@gmail.com', password='Password1234$')
              │         │                         │            └ 'First55Select'
              │         │                         └ <sqlalchemy.orm.session.Session object at 0x000002781B3CB890>
              │         └ <function get_authenticated_user at 0x000002781B01E660>
              └ <module 'app.crud.user_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\user_cru...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\user_crud.py", line 65, in get_authenticated_user
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 00:47:33.068 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:47:33.069 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:47:33.070 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:47:33.070 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:47:33.070 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:47:33.070 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:47:33.070 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:47:33.071 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:47:33.071 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:47:33.071 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:47:33.071 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:47:33.071 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:47:33.071 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:47:33.072 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:47:33.072 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:47:33.072 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:47:33.093 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:47:33.098 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 00:47:33.101 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 00:47:33.120 | INFO     | app.services.user_service:remove_user:139 - 
USER ACCOUNT REMOVED
2024-11-07 00:49:37.245 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:49:37.246 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:37.247 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:37.247 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:49:37.247 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:37.248 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:37.248 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:49:37.248 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:49:37.248 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:49:37.249 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:49:37.249 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:37.249 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:37.249 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:49:37.249 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:49:37.250 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:49:37.250 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:49:37.273 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:49:37.281 | WARNING  | app.services.user_service:remove_user:133 - CANNOT REMOVE USER ACCOUNT - USER WITH PROVIDED CREDENTIALS NOT FOUND
2024-11-07 00:49:37.281 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001EEC8984860>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001EECE1DC4A0>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001EECE132660>, db=<sqlalchemy.orm.session.Session object at 0x000001EECE187D...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001EECE137D40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser56@gmail.com', password='Password1234s$')
           │             │              │            └ 'First56'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001EECE187D90>
           │             └ <function remove_user at 0x000001EECDDBEC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 134, in remove_user
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 00:49:46.171 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:49:46.172 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:46.172 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:46.172 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:49:46.172 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:46.173 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:46.173 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:49:46.173 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:49:46.173 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:49:46.173 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:49:46.173 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:46.173 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:46.174 | WARNING  | app.validators.user_validator:validate_email:51 - Provided email is invalid: firstUser56@gmail.com,
2024-11-07 00:49:46.174 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: Invalid email format
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001EEC8984860>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001EECE1DC4A0>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001EECE132660>, db=<sqlalchemy.orm.session.Session object at 0x000001EECE1799...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001EECE187C80>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser56@gmail.com,', password='Password1234$')
           │             │              │            └ 'First56'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001EECE179950>
           │             └ <function remove_user at 0x000001EECDDBEC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 124, in remove_user
    user_validator.validate_email(data.email)
    │              │              │    └ 'firstUser56@gmail.com,'
    │              │              └ UserDelete(email='firstUser56@gmail.com,', password='Password1234$')
    │              └ <function validate_email at 0x000001EECDDBE160>
    └ <module 'app.validators.user_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\val...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\validators\user_validator.py", line 52, in validate_email
    raise shared_validator.ValidationException("Invalid email format")
          │                └ <class 'app.validators.shared_validator.ValidationException'>
          └ <module 'app.validators.shared_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\v...

app.validators.shared_validator.ValidationException: Invalid email format
2024-11-07 00:49:50.692 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:49:50.692 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:50.692 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:50.693 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:49:50.693 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:50.693 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:50.693 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:49:50.693 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:49:50.693 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:49:50.694 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:49:50.694 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:50.694 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:50.694 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:49:50.694 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:49:50.694 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:49:50.694 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:49:50.695 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:49:50.696 | WARNING  | app.services.user_service:remove_user:133 - CANNOT REMOVE USER ACCOUNT - USER WITH PROVIDED CREDENTIALS NOT FOUND
2024-11-07 00:49:50.696 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001EEC8984860>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001EECE1DC4A0>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001EECE132660>, db=<sqlalchemy.orm.session.Session object at 0x000001EECE33E0...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001EECE339280>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser56@gmail.comm', password='Password1234$')
           │             │              │            └ 'First56'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001EECE33E010>
           │             └ <function remove_user at 0x000001EECDDBEC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 134, in remove_user
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 00:49:54.848 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:49:54.848 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:54.849 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:54.849 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:49:54.849 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:54.849 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:54.849 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:49:54.850 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:49:54.850 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:49:54.850 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:49:54.850 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:49:54.850 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:49:54.851 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:49:54.851 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:49:54.851 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:49:54.851 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:49:54.851 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:49:54.852 | WARNING  | app.services.user_service:remove_user:133 - CANNOT REMOVE USER ACCOUNT - USER WITH PROVIDED CREDENTIALS NOT FOUND
2024-11-07 00:49:54.853 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001EEC8984860>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001EECE1DC4A0>
    └ <WorkerThread(AnyIO worker thread, started 19132)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001EECE132660>, db=<sqlalchemy.orm.session.Session object at 0x000001EECE2BE7...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001EECE3450C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser56@gmail.com', password='Password1234$')
           │             │              │            └ 'First56s'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000001EECE2BE7D0>
           │             └ <function remove_user at 0x000001EECDDBEC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 134, in remove_user
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 00:50:14.644 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 00:50:14.644 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:50:14.644 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:50:14.644 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 00:50:14.645 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:50:14.645 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:50:14.645 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 00:50:14.645 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 00:50:14.645 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 00:50:14.645 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 00:50:14.645 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 00:50:14.646 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 00:50:14.646 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 00:50:14.646 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 00:50:14.646 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 00:50:14.646 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 00:50:14.647 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 00:50:14.648 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 00:50:14.651 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 00:50:14.667 | INFO     | app.services.user_service:remove_user:139 - 
USER ACCOUNT REMOVED
2024-11-07 16:48:26.196 | INFO     | app.services.user_service:get_user_account_data:54 - 
GETTING USER ACCOUNT DATA
2024-11-07 16:48:26.200 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:48:26.203 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:48:26.286 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First33
2024-11-07 16:48:26.306 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First33
2024-11-07 16:48:26.307 | INFO     | app.services.user_service:get_user_account_data:62 - 
USER ACCOUNT DATA HAS BEEN PARSED
2024-11-07 16:48:34.580 | INFO     | app.services.user_service:get_user_account_data:54 - 
GETTING USER ACCOUNT DATA
2024-11-07 16:48:34.581 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:48:34.582 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:48:34.583 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First33k
2024-11-07 16:48:34.587 | INFO     | app.crud.user_crud:get_by_username_email_id:38 - User not found with given parameters
2024-11-07 16:48:34.589 | WARNING  | app.services.user_service:get_user_account_data:59 - 
CANNOT GET USER ACCOUNT DATA - USER: First33k HAS NOT BEEN FOUND
2024-11-07 16:48:34.589 | ERROR    | app.services.user_service:get_user_account_data:65 - USER: First33k DATA CANNOT BE PARSED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000020708FC4860>
    └ <WorkerThread(AnyIO worker thread, started 28380)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002070E7FC4A0>
    └ <WorkerThread(AnyIO worker thread, started 28380)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function read_user at 0x000002070E752160>, db=<sqlalchemy.orm.session.Session object at 0x000002070E806350...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002070E7AB380>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 45, in read_user
    return user_services.get_user_account_data(db=db, username=username)
           │             │                        │            └ 'First33k'
           │             │                        └ <sqlalchemy.orm.session.Session object at 0x000002070E806350>
           │             └ <function get_user_account_data at 0x000002070D40E480>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 60, in get_user_account_data
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 16:48:39.328 | INFO     | app.services.user_service:get_user_account_data:54 - 
GETTING USER ACCOUNT DATA
2024-11-07 16:48:39.330 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:48:39.331 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:48:39.333 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First33
2024-11-07 16:48:39.338 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First33
2024-11-07 16:48:39.338 | INFO     | app.services.user_service:get_user_account_data:62 - 
USER ACCOUNT DATA HAS BEEN PARSED
2024-11-07 16:49:27.941 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 16:49:27.944 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:27.945 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:27.946 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:49:27.947 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:27.948 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:27.948 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:49:27.950 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:49:27.950 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:49:27.951 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:49:27.952 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:27.953 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:27.954 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:49:27.955 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:49:27.956 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:49:27.957 | INFO     | app.services.user_service:create_user:22 - Got empty user role, proceeding further
2024-11-07 16:49:27.958 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 16:49:27.961 | INFO     | app.crud.user_crud:get_by_username_email_id:23 - Searching for user by email: firstUser56@gmail.com
2024-11-07 16:49:27.965 | INFO     | app.crud.user_crud:get_by_username_email_id:38 - User not found with given parameters
2024-11-07 16:49:27.966 | INFO     | app.crud.user_crud:create:71 - Attempting to create user
2024-11-07 16:49:27.967 | INFO     | app.crud.user_crud:create:86 - User prepared for creation, waiting for transaction commit
2024-11-07 16:49:27.982 | INFO     | app.validators.user_session_validator:validate_ip:7 - Validating user IP address
2024-11-07 16:49:27.985 | INFO     | app.validators.user_session_validator:validate_ip:21 - 127.0.0.1
2024-11-07 16:49:27.986 | INFO     | app.validators.user_session_validator:validate_ip:22 - User IP validation passed
2024-11-07 16:49:27.987 | INFO     | app.crud.user_session_crud:create:11 - Attempting to create user session
2024-11-07 16:49:27.988 | INFO     | app.crud.user_session_crud:create:20 - Session prepared for creation, waiting for transaction commit
2024-11-07 16:49:27.989 | INFO     | app.services.user_service:create_user:40 - 
USER ACCOUNT HAS BEEN CREATED
2024-11-07 16:49:33.368 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 16:49:33.370 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:33.371 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:33.372 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:49:33.372 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:33.373 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:33.375 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:49:33.376 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:49:33.377 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:49:33.378 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:49:33.379 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:33.380 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:33.381 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:49:33.382 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:49:33.382 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:49:33.383 | INFO     | app.services.user_service:create_user:22 - Got empty user role, proceeding further
2024-11-07 16:49:33.384 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 16:49:33.387 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First56
2024-11-07 16:49:33.388 | WARNING  | app.services.user_service:create_user:29 - 
USER ACCOUNT CANNOT BE CREATED AS THERE IS AN EXISTING USER WITH THE SAME USERNAME OR EMAIL
2024-11-07 16:49:33.389 | ERROR    | app.services.user_service:create_user:46 - 
USER ACCOUNT HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Username or email already in use
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000020708FC4860>
    └ <WorkerThread(AnyIO worker thread, started 28380)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002070E7FC4A0>
    └ <WorkerThread(AnyIO worker thread, started 28380)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_user at 0x000002070E751C60>, db=<sqlalchemy.orm.session.Session object at 0x000002070D4205...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002070E7AA7C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 37, in create_user
    return user_services.create_user(db=db, request=request, user=user)
           │             │              │           │             └ UserCreate(username='First56', email='firstUser56@gmail.com', password='Password1234$', role=None)
           │             │              │           └ <starlette.requests.Request object at 0x000002070E955410>
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000002070D420550>
           │             └ <function create_user at 0x000002070D40D6C0>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 30, in create_user
    raise HTTPException(status_code=409, detail="Username or email already in use")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Username or email already in use
2024-11-07 16:49:49.261 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 16:49:49.262 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:49.263 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:49.264 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:49:49.265 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:49.267 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:49.268 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:49:49.269 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:49:49.270 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:49:49.271 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:49:49.273 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:49.275 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:49.276 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:49:49.277 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:49:49.278 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:49:49.279 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 16:49:49.281 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 16:49:49.290 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 16:49:49.303 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 16:49:49.371 | INFO     | app.services.user_service:remove_user:139 - 
USER ACCOUNT REMOVED
2024-11-07 16:49:58.688 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 16:49:58.690 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:58.691 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:58.693 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:49:58.694 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:58.695 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:58.696 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:49:58.698 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:49:58.700 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:49:58.701 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:49:58.702 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:49:58.704 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:49:58.705 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:49:58.707 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:49:58.707 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:49:58.709 | INFO     | app.services.user_service:create_user:22 - Got empty user role, proceeding further
2024-11-07 16:49:58.711 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 16:49:58.715 | INFO     | app.crud.user_crud:get_by_username_email_id:23 - Searching for user by email: firstUser56@gmail.com
2024-11-07 16:49:58.720 | INFO     | app.crud.user_crud:get_by_username_email_id:38 - User not found with given parameters
2024-11-07 16:49:58.722 | INFO     | app.crud.user_crud:create:71 - Attempting to create user
2024-11-07 16:49:58.724 | INFO     | app.crud.user_crud:create:86 - User prepared for creation, waiting for transaction commit
2024-11-07 16:49:58.729 | INFO     | app.validators.user_session_validator:validate_ip:7 - Validating user IP address
2024-11-07 16:49:58.730 | INFO     | app.validators.user_session_validator:validate_ip:21 - 127.0.0.1
2024-11-07 16:49:58.731 | INFO     | app.validators.user_session_validator:validate_ip:22 - User IP validation passed
2024-11-07 16:49:58.732 | INFO     | app.crud.user_session_crud:create:11 - Attempting to create user session
2024-11-07 16:49:58.734 | INFO     | app.crud.user_session_crud:create:20 - Session prepared for creation, waiting for transaction commit
2024-11-07 16:49:58.735 | INFO     | app.services.user_service:create_user:40 - 
USER ACCOUNT HAS BEEN CREATED
2024-11-07 16:54:49.400 | INFO     | app.services.user_service:update_user:72 - 
UPDATING USER ACCOUNT DATA
2024-11-07 16:54:49.403 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:54:49.404 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:54:49.406 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:54:49.406 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:54:49.408 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:54:49.409 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:54:49.410 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:54:49.412 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:54:49.413 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:54:49.414 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:54:49.416 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:54:49.417 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:54:49.419 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:54:49.420 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:54:49.421 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:54:49.422 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:54:49.424 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:54:49.426 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:54:49.427 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:54:49.428 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:54:49.430 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 16:54:49.432 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 16:54:49.438 | INFO     | app.crud.user_crud:update:99 - Attempting to edit user account data
2024-11-07 16:54:49.441 | INFO     | app.crud.user_crud:get_by_username_email_id:31 - Searching for user by id: 83
2024-11-07 16:54:49.444 | INFO     | app.crud.user_crud:get_by_username_email_id:35 - User found by id: 83
2024-11-07 16:54:49.445 | INFO     | app.crud.user_crud:update:108 - User prepared for password change, waiting for transaction commit
2024-11-07 16:54:49.448 | INFO     | app.crud.user_crud:update:113 - User prepared for email change, waiting for transaction commit
2024-11-07 16:54:49.458 | INFO     | app.services.user_service:update_user:109 - SUCCESFULLY UPDATED USER ACCOUNT DATA
2024-11-07 16:56:23.626 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 16:56:23.628 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:23.630 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:23.632 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:56:23.634 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:23.635 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:23.637 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:56:23.639 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:56:23.641 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:56:23.642 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:56:23.644 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:23.645 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:23.647 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:56:23.648 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:56:23.650 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:56:23.651 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 16:56:23.653 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 16:56:23.658 | WARNING  | app.services.user_service:remove_user:133 - CANNOT REMOVE USER ACCOUNT - USER WITH PROVIDED CREDENTIALS NOT FOUND
2024-11-07 16:56:23.660 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000020708FC4860>
    └ <WorkerThread(AnyIO worker thread, started 28380)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002070E7FC4A0>
    └ <WorkerThread(AnyIO worker thread, started 28380)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000002070E752660>, db=<sqlalchemy.orm.session.Session object at 0x000002070E79C6...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002070E79D380>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_services.remove_user(db=db, username=username, data=data)
           │             │              │            │              └ UserDelete(email='firstUser56@gmail.comc', password='Password1234$')
           │             │              │            └ 'First56'
           │             │              └ <sqlalchemy.orm.session.Session object at 0x000002070E79C610>
           │             └ <function remove_user at 0x000002070D40EC00>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 134, in remove_user
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 16:56:29.752 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 16:56:29.754 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:29.756 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:29.757 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:56:29.758 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:29.760 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:29.761 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:56:29.762 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:56:29.763 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:56:29.764 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:56:29.765 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:29.767 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:29.768 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:56:29.770 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:56:29.772 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:56:29.773 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 16:56:29.775 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 16:56:29.779 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 16:56:29.787 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 16:56:29.808 | INFO     | app.services.user_service:remove_user:139 - 
USER ACCOUNT REMOVED
2024-11-07 16:56:55.789 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 16:56:55.792 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:55.793 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:55.795 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:56:55.797 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:55.798 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:55.800 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:56:55.802 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:56:55.803 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:56:55.805 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:56:55.806 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:56:55.809 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:56:55.810 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:56:55.812 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:56:55.813 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:56:55.815 | INFO     | app.services.user_service:create_user:22 - Got empty user role, proceeding further
2024-11-07 16:56:55.817 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 16:56:55.823 | INFO     | app.crud.user_crud:get_by_username_email_id:23 - Searching for user by email: firstUser56@gmail.com
2024-11-07 16:56:55.829 | INFO     | app.crud.user_crud:get_by_username_email_id:38 - User not found with given parameters
2024-11-07 16:56:55.831 | INFO     | app.crud.user_crud:create:71 - Attempting to create user
2024-11-07 16:56:55.833 | INFO     | app.crud.user_crud:create:86 - User prepared for creation, waiting for transaction commit
2024-11-07 16:56:55.837 | INFO     | app.validators.user_session_validator:validate_ip:7 - Validating user IP address
2024-11-07 16:56:55.839 | INFO     | app.validators.user_session_validator:validate_ip:21 - 127.0.0.1
2024-11-07 16:56:55.840 | INFO     | app.validators.user_session_validator:validate_ip:22 - User IP validation passed
2024-11-07 16:56:55.841 | INFO     | app.crud.user_session_crud:create:11 - Attempting to create user session
2024-11-07 16:56:55.843 | INFO     | app.crud.user_session_crud:create:20 - Session prepared for creation, waiting for transaction commit
2024-11-07 16:56:55.845 | INFO     | app.services.user_service:create_user:40 - 
USER ACCOUNT HAS BEEN CREATED
2024-11-07 16:57:32.876 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 16:57:32.879 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:57:32.881 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:57:32.882 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 16:57:32.883 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:57:32.886 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:57:32.887 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 16:57:32.889 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 16:57:32.891 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 16:57:32.892 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 16:57:32.893 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 16:57:32.895 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 16:57:32.897 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 16:57:32.899 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 16:57:32.901 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 16:57:32.902 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 16:57:32.905 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 16:57:32.911 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 16:57:32.921 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 16:57:32.943 | INFO     | app.services.user_service:remove_user:139 - 
USER ACCOUNT REMOVED
2024-11-07 17:13:40.878 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 17:13:40.881 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:40.884 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:40.885 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 17:13:40.886 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:40.888 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:40.889 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 17:13:40.890 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 17:13:40.892 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 17:13:40.893 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 17:13:40.895 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:40.896 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:40.897 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 17:13:40.899 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 17:13:40.900 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 17:13:40.901 | INFO     | app.services.user_service:create_user:22 - Got empty user role, proceeding further
2024-11-07 17:13:40.981 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 17:13:40.993 | INFO     | app.crud.user_crud:get_by_username_email_id:23 - Searching for user by email: firstUser56@gmail.com
2024-11-07 17:13:40.997 | INFO     | app.crud.user_crud:get_by_username_email_id:38 - User not found with given parameters
2024-11-07 17:13:40.998 | INFO     | app.crud.user_crud:create:71 - Attempting to create user
2024-11-07 17:13:40.999 | INFO     | app.crud.user_crud:create:86 - User prepared for creation, waiting for transaction commit
2024-11-07 17:13:41.005 | INFO     | app.validators.user_session_validator:validate_ip:7 - Validating user IP address
2024-11-07 17:13:41.007 | INFO     | app.validators.user_session_validator:validate_ip:21 - 127.0.0.1
2024-11-07 17:13:41.009 | INFO     | app.validators.user_session_validator:validate_ip:22 - User IP validation passed
2024-11-07 17:13:41.009 | INFO     | app.crud.user_session_crud:create:11 - Attempting to create user session
2024-11-07 17:13:41.010 | INFO     | app.crud.user_session_crud:create:20 - Session prepared for creation, waiting for transaction commit
2024-11-07 17:13:41.011 | INFO     | app.services.user_service:create_user:40 - 
USER ACCOUNT HAS BEEN CREATED
2024-11-07 17:13:42.553 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 17:13:42.555 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:42.556 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:42.557 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 17:13:42.559 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:42.561 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:42.562 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 17:13:42.564 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 17:13:42.565 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 17:13:42.566 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 17:13:42.568 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:42.569 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:42.571 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 17:13:42.572 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 17:13:42.574 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 17:13:42.576 | INFO     | app.services.user_service:create_user:22 - Got empty user role, proceeding further
2024-11-07 17:13:42.578 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 17:13:42.583 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First56
2024-11-07 17:13:42.586 | WARNING  | app.services.user_service:create_user:29 - 
USER ACCOUNT CANNOT BE CREATED AS THERE IS AN EXISTING USER WITH THE SAME USERNAME OR EMAIL
2024-11-07 17:13:42.588 | ERROR    | app.services.user_service:create_user:46 - 
USER ACCOUNT HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Username or email already in use
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000027A11544860>
    └ <WorkerThread(AnyIO worker thread, started 8124)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000027A16DCC540>
    └ <WorkerThread(AnyIO worker thread, started 8124)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_user at 0x0000027A16D25DA0>, db=<sqlalchemy.orm.session.Session object at 0x0000027A114A4F...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000027A16D63D40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 37, in create_user
    return user_service.create_user(db=db, request=request, user=user)
           │            │              │           │             └ UserCreate(username='First56', email='firstUser56@gmail.com', password='Password1234$', role=None)
           │            │              │           └ <starlette.requests.Request object at 0x0000027A16D7A650>
           │            │              └ <sqlalchemy.orm.session.Session object at 0x0000027A114A4F10>
           │            └ <function create_user at 0x0000027A158947C0>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 30, in create_user
    raise HTTPException(status_code=409, detail="Username or email already in use")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Username or email already in use
2024-11-07 17:13:47.037 | INFO     | app.services.user_service:get_user_account_data:54 - 
GETTING USER ACCOUNT DATA
2024-11-07 17:13:47.039 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:47.040 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:47.042 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First33
2024-11-07 17:13:47.048 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First33
2024-11-07 17:13:47.050 | INFO     | app.services.user_service:get_user_account_data:62 - 
USER ACCOUNT DATA HAS BEEN PARSED
2024-11-07 17:13:52.829 | INFO     | app.services.user_service:update_user:72 - 
UPDATING USER ACCOUNT DATA
2024-11-07 17:13:52.831 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:52.832 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:52.834 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 17:13:52.835 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:52.837 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:52.839 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 17:13:52.841 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 17:13:52.842 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 17:13:52.844 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 17:13:52.846 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:52.847 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:52.849 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 17:13:52.851 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 17:13:52.852 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 17:13:52.854 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 17:13:52.856 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:13:52.857 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:13:52.858 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 17:13:52.859 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 17:13:52.861 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 17:13:52.862 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 17:13:52.865 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 17:13:52.875 | INFO     | app.crud.user_crud:update:99 - Attempting to edit user account data
2024-11-07 17:13:52.877 | INFO     | app.crud.user_crud:get_by_username_email_id:31 - Searching for user by id: 85
2024-11-07 17:13:52.884 | INFO     | app.crud.user_crud:get_by_username_email_id:35 - User found by id: 85
2024-11-07 17:13:52.886 | INFO     | app.crud.user_crud:update:108 - User prepared for password change, waiting for transaction commit
2024-11-07 17:13:52.889 | INFO     | app.crud.user_crud:update:113 - User prepared for email change, waiting for transaction commit
2024-11-07 17:13:52.900 | INFO     | app.services.user_service:update_user:109 - SUCCESFULLY UPDATED USER ACCOUNT DATA
2024-11-07 17:14:01.805 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 17:14:01.807 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:14:01.811 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:14:01.813 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 17:14:01.816 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:14:01.817 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:14:01.819 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 17:14:01.821 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 17:14:01.822 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 17:14:01.824 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 17:14:01.826 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:14:01.827 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:14:01.828 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 17:14:01.830 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 17:14:01.833 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 17:14:01.835 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 17:14:01.838 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 17:14:01.845 | WARNING  | app.services.user_service:remove_user:133 - CANNOT REMOVE USER ACCOUNT - USER WITH PROVIDED CREDENTIALS NOT FOUND
2024-11-07 17:14:01.846 | ERROR    | app.services.user_service:remove_user:142 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000027A11544860>
    └ <WorkerThread(AnyIO worker thread, started 8124)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000027A16DCC540>
    └ <WorkerThread(AnyIO worker thread, started 8124)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x0000027A16D267A0>, db=<sqlalchemy.orm.session.Session object at 0x0000027A16ED6A...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000027A16D3F5C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_service.remove_user(db=db, username=username, data=data)
           │            │              │            │              └ UserDelete(email='firstUser56@gmail.comc', password='Password1234$')
           │            │              │            └ 'First56'
           │            │              └ <sqlalchemy.orm.session.Session object at 0x0000027A16ED6A10>
           │            └ <function remove_user at 0x0000027A159DA340>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 134, in remove_user
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 17:14:04.722 | INFO     | app.services.user_service:remove_user:121 - 
REMOVING USER ACCOUNT
2024-11-07 17:14:04.724 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:14:04.725 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:14:04.727 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 17:14:04.728 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:14:04.729 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:14:04.731 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 17:14:04.733 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 17:14:04.734 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 17:14:04.736 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 17:14:04.737 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:14:04.738 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:14:04.740 | INFO     | app.validators.user_validator:validate_email:54 - Email validation passed
2024-11-07 17:14:04.741 | INFO     | app.validators.user_validator:validate_password:62 - Validating password format
2024-11-07 17:14:04.742 | INFO     | app.validators.user_validator:validate_password:89 - Password validation passed
2024-11-07 17:14:04.743 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 17:14:04.745 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 17:14:04.754 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 17:14:04.766 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 17:14:04.825 | INFO     | app.services.user_service:remove_user:139 - 
USER ACCOUNT REMOVED
2024-11-07 17:27:17.738 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 17:27:17.743 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:27:17.746 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:27:17.750 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 17:27:17.752 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:27:17.755 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:27:17.757 | WARNING  | app.validators.user_validator:validate_username:25 - Username length out of bounds, provided username: First56666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
2024-11-07 17:27:17.760 | ERROR    | app.services.user_service:create_user:46 - 
USER ACCOUNT HAS NOT BEEN CREATED, EXCEPTION OCCURED: Username must be between 4 and 50 characters long
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000027FBB5F4860>
    └ <WorkerThread(AnyIO worker thread, started 16048)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000027FC0E9C540>
    └ <WorkerThread(AnyIO worker thread, started 16048)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_user at 0x0000027FC0DF5DA0>, db=<sqlalchemy.orm.session.Session object at 0x0000027FC0E1B5...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000027FC0E236C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 37, in create_user
    return user_service.create_user(db=db, request=request, user=user)
           │            │              │           │             └ UserCreate(username='First566666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666...
           │            │              │           └ <starlette.requests.Request object at 0x0000027FC0E4AC50>
           │            │              └ <sqlalchemy.orm.session.Session object at 0x0000027FC0E1B590>
           │            └ <function create_user at 0x0000027FBF9647C0>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 14, in create_user
    user_validator.validate_username(user.username)
    │              │                 │    └ 'First56666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666...
    │              │                 └ UserCreate(username='First566666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666...
    │              └ <function validate_username at 0x0000027FC09BC5E0>
    └ <module 'app.validators.user_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\val...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\validators\user_validator.py", line 26, in validate_username
    raise shared_validator.ValidationException(f"Username must be between {MIN_USERNAME_LENGTH} and {MAX_USERNAME_LENGTH} characters long")
          │                └ <class 'app.validators.shared_validator.ValidationException'>
          └ <module 'app.validators.shared_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\v...

app.validators.shared_validator.ValidationException: Username must be between 4 and 50 characters long
2024-11-07 17:28:12.136 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 17:28:12.139 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:28:12.139 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:28:12.140 | INFO     | app.validators.user_validator:validate_username:17 - Validating username format
2024-11-07 17:28:12.141 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:28:12.142 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:28:12.144 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 17:28:12.146 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 17:28:12.147 | INFO     | app.validators.user_validator:validate_username:31 - Username validation passed
2024-11-07 17:28:12.147 | INFO     | app.validators.user_validator:validate_email:39 - Validating email format
2024-11-07 17:28:12.149 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 17:28:12.150 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 17:28:12.151 | WARNING  | app.validators.user_validator:validate_email:46 - Email length out of bounds, provided email: firstUser56666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666@gmail.com
2024-11-07 17:28:12.154 | ERROR    | app.services.user_service:create_user:46 - 
USER ACCOUNT HAS NOT BEEN CREATED, EXCEPTION OCCURED: Email must be between 5 and 100 characters long
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000027FBB5F4860>
    └ <WorkerThread(AnyIO worker thread, started 16048)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000027FC0E9C540>
    └ <WorkerThread(AnyIO worker thread, started 16048)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_user at 0x0000027FC0DF5DA0>, db=<sqlalchemy.orm.session.Session object at 0x0000027FC09DD6...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000027FC0E0EE00>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 37, in create_user
    return user_service.create_user(db=db, request=request, user=user)
           │            │              │           │             └ UserCreate(username='First56', email='firstUser566666666666666666666666666666666666666666666666666666666666666666666666666666...
           │            │              │           └ <starlette.requests.Request object at 0x0000027FC0F23D90>
           │            │              └ <sqlalchemy.orm.session.Session object at 0x0000027FC09DD650>
           │            └ <function create_user at 0x0000027FBF9647C0>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 15, in create_user
    user_validator.validate_email(user.email)
    │              │              │    └ 'firstUser5666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666...
    │              │              └ UserCreate(username='First56', email='firstUser566666666666666666666666666666666666666666666666666666666666666666666666666666...
    │              └ <function validate_email at 0x0000027FC09BC7C0>
    └ <module 'app.validators.user_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\val...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\validators\user_validator.py", line 47, in validate_email
    raise shared_validator.ValidationException(f"Email must be between {MIN_EMAIL_LENGTH} and {MAX_EMAIL_LENGTH} characters long")
          │                └ <class 'app.validators.shared_validator.ValidationException'>
          └ <module 'app.validators.shared_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\v...

app.validators.shared_validator.ValidationException: Email must be between 5 and 100 characters long
2024-11-07 20:13:18.497 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:13:18.499 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: module 'app.config.logger' has no attribute 'info'
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001FBD7E04860>
    └ <WorkerThread(AnyIO worker thread, started 28500)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001FBDD65C9A0>
    └ <WorkerThread(AnyIO worker thread, started 28500)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001FBDD5B2E80>, db=<sqlalchemy.orm.session.Session object at 0x000001FBDD...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001FBDD5EFB40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija7', description='Kategorijos aprasymas.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001FBDD5BEE90>
           │                └ <function create_category at 0x000001FBDC26A480>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 13, in create_category
    category_validator.validate_category_name(category_name=category.name)
    │                  │                                    │        └ 'Kategorija7'
    │                  │                                    └ CategoryCreate(name='Kategorija7', description='Kategorijos aprasymas.')
    │                  └ <function validate_category_name at 0x000001FBDC26A8E0>
    └ <module 'app.validators.category_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\validators\category_validator.py", line 12, in validate_category_name
    logger.info(f"Validating category name")
    └ <module 'app.config.logger' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\config\\logger....

AttributeError: module 'app.config.logger' has no attribute 'info'
2024-11-07 20:17:12.349 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:17:12.352 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:17:12.354 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:17:12.356 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:17:12.358 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:17:12.360 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 20:17:12.361 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:17:12.363 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:17:12.364 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 20:17:12.366 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:17:12.466 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000023DD2914860>
    └ <WorkerThread(AnyIO worker thread, started 30908)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000023DD819C9A0>
    └ <WorkerThread(AnyIO worker thread, started 30908)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x0000023DD80F2E80>, db=<sqlalchemy.orm.session.Session object at 0x0000023DD8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000023DD8141D40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija7', description='Kategorijos aprasymas.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x0000023DD811B890>
           │                └ <function create_category at 0x0000023DD6DAA520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 20:28:16.130 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:28:16.131 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:28:16.131 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:28:16.132 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:28:16.133 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:28:16.134 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 20:28:16.135 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:28:16.136 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:28:16.138 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 20:28:16.139 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:28:16.144 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000023DD2914860>
    └ <WorkerThread(AnyIO worker thread, started 30908)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000023DD819C9A0>
    └ <WorkerThread(AnyIO worker thread, started 30908)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x0000023DD80F2E80>, db=<sqlalchemy.orm.session.Session object at 0x0000023DD8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000023DD814B1C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija7', description='Kategorijos aprasymass.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x0000023DD8286090>
           │                └ <function create_category at 0x0000023DD6DAA520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 20:28:25.108 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:28:25.110 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:28:25.112 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:28:25.113 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:28:25.114 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:28:25.115 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 20:28:25.116 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:28:25.119 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000023DD2914860>
    └ <WorkerThread(AnyIO worker thread, started 30908)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000023DD819C9A0>
    └ <WorkerThread(AnyIO worker thread, started 30908)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x0000023DD80F2E80>, db=<sqlalchemy.orm.session.Session object at 0x0000023DD8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000023DD8303640>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija7', description=None)
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x0000023DD81A6890>
           │                └ <function create_category at 0x0000023DD6DAA520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 20:28:50.006 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:28:50.008 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:28:50.009 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:28:50.009 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:28:50.011 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:28:50.012 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 20:28:50.013 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:28:50.014 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:28:50.016 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 20:28:50.016 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:28:50.021 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 20:28:50.025 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 20:28:50.033 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 20:54:50.188 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:54:50.190 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:54:50.191 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:54:50.193 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:54:50.194 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:54:50.195 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 20:54:50.196 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:54:50.197 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:54:50.198 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 20:54:50.199 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:54:50.252 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001E306474860>
    └ <WorkerThread(AnyIO worker thread, started 17696)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001E30BC9C9A0>
    └ <WorkerThread(AnyIO worker thread, started 17696)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001E30BBF2E80>, db=<sqlalchemy.orm.session.Session object at 0x000001E30B...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001E30BC2FA40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija8', description='Kategorijos aprasymas.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001E30BC4B890>
           │                └ <function create_category at 0x000001E30A8AA480>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 20:54:56.946 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:54:56.947 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:54:56.948 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:54:56.949 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:54:56.951 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:54:56.952 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 20:54:56.953 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:54:56.954 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:54:56.955 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 20:54:56.956 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:54:56.961 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 20:54:56.962 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 20:54:56.969 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 20:58:09.507 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:58:09.508 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:58:09.508 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:58:09.509 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:58:09.510 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:58:09.511 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 20:58:09.511 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:58:09.512 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:58:09.513 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 20:58:09.513 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:58:09.516 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001E306474860>
    └ <WorkerThread(AnyIO worker thread, started 17696)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001E30BC9C9A0>
    └ <WorkerThread(AnyIO worker thread, started 17696)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001E30BBF2E80>, db=<sqlalchemy.orm.session.Session object at 0x000001E30B...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001E30BC033C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija9', description='Kategorijos aprasymas.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001E30BD05050>
           │                └ <function create_category at 0x000001E30A8AA480>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 20:58:20.915 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 20:58:20.916 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 20:58:20.916 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 20:58:20.917 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 20:58:20.918 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 20:58:20.918 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 20:58:20.919 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 20:58:20.922 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 20:58:20.924 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 20:58:20.927 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:00:17.717 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:00:17.718 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:00:17.719 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:00:17.720 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:00:17.720 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:00:17.721 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:00:17.722 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:00:17.762 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001A1E29D4860>
    └ <WorkerThread(AnyIO worker thread, started 29912)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001A1E825CA40>
    └ <WorkerThread(AnyIO worker thread, started 29912)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001A1E81B2F20>, db=<sqlalchemy.orm.session.Session object at 0x000001A1E8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001A1E81DBB80>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija10', description=None)
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001A1E8201D50>
           │                └ <function create_category at 0x000001A1E7E3A520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 21:00:41.064 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:00:41.065 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:00:41.067 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:00:41.068 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:00:41.069 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:00:41.070 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:00:41.071 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:00:41.075 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:00:41.077 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:00:41.086 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:03:46.541 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:03:46.543 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:03:46.544 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:03:46.545 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:03:46.545 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:03:46.546 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:03:46.546 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:03:46.578 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001F55BE64860>
    └ <WorkerThread(AnyIO worker thread, started 21684)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001F5616CCA40>
    └ <WorkerThread(AnyIO worker thread, started 21684)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001F561622F20>, db=<sqlalchemy.orm.session.Session object at 0x000001F561...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001F56030EB80>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija11', description=None)
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001F561672150>
           │                └ <function create_category at 0x000001F5602DA520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 21:03:51.841 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:03:51.842 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:03:51.842 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:03:51.843 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:03:51.844 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:03:51.845 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:03:51.846 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:03:51.848 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:03:51.849 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:03:51.854 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:04:06.590 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:04:06.594 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:04:06.595 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:04:06.597 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:04:06.597 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:04:06.598 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:04:06.599 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:04:06.644 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001DC65334860>
    └ <WorkerThread(AnyIO worker thread, started 32324)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001DC6AAFCA40>
    └ <WorkerThread(AnyIO worker thread, started 32324)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001DC6AA52F20>, db=<sqlalchemy.orm.session.Session object at 0x000001DC6A...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001DC6AA81500>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija12', description=None)
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001DC6AAABA10>
           │                └ <function create_category at 0x000001DC6970A520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 21:04:11.313 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:04:11.316 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:04:11.317 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:04:11.318 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:04:11.319 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:04:11.319 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:04:11.320 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:04:11.324 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:04:11.325 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:04:11.335 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:04:32.488 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:04:32.490 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:04:32.491 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:04:32.493 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:04:32.494 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:04:32.495 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:04:32.496 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:04:32.548 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:04:32.550 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:04:32.556 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:05:43.725 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:05:43.727 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:05:43.727 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:05:43.729 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:05:43.730 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:05:43.731 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:05:43.731 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:05:43.787 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000021077534860>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002107CD2CA40>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000002107CC82F20>, db=<sqlalchemy.orm.session.Session object at 0x000002107C...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002107CCDAF00>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija14', description=None)
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000002107CCABC90>
           │                └ <function create_category at 0x000002107B93A520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 21:05:50.954 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:05:50.956 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:05:50.957 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:05:50.958 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:05:50.960 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:05:50.960 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:05:50.961 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:05:50.965 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:05:50.966 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:05:50.974 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:21:58.733 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:21:58.735 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:21:58.736 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:21:58.737 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:21:58.738 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:21:58.739 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:21:58.740 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:21:58.743 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000021077534860>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002107CD2CA40>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000002107CC82F20>, db=<sqlalchemy.orm.session.Session object at 0x000002107C...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002107CC9FC80>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija15', description=None)
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000002107CE8BB10>
           │                └ <function create_category at 0x000002107B93A520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 21:22:03.895 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:22:03.897 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:22:03.898 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:22:03.900 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:22:03.900 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:22:03.901 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:22:03.902 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:22:03.906 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:22:03.907 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:22:03.914 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:22:17.383 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:22:17.385 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:22:17.386 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:22:17.388 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:22:17.388 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:22:17.389 | INFO     | app.services.category_service:create_category:18 - CATEGORY DESCRIPTION NOT PROVIDED, PROCEEDING FURTHER
2024-11-07 21:22:17.390 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:22:17.395 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:22:17.396 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:22:17.407 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 21:27:14.268 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:27:14.270 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:27:14.271 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:27:14.272 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:27:14.272 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:27:14.273 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 21:27:14.274 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:27:14.275 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:27:14.276 | WARNING  | app.validators.category_validator:validate_category_description:37 - Category description length out of bounds, provided description: 10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2024-11-07 21:27:14.278 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: Category description must be less than 255 characters long
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000021077534860>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002107CD2CA40>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000002107CC82F20>, db=<sqlalchemy.orm.session.Session object at 0x000002107C...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002107CC9D0C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija18', description='1000000000000000000000000000000000000000000000000000000000000000000000000000...
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000002107CE86590>
           │                └ <function create_category at 0x000002107B93A520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 16, in create_category
    category_validator.validate_category_description(description=category.description)
    │                  │                                         │        └ '1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000...
    │                  │                                         └ CategoryCreate(name='Kategorija18', description='1000000000000000000000000000000000000000000000000000000000000000000000000000...
    │                  └ <function validate_category_description at 0x000002107B93A980>
    └ <module 'app.validators.category_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\validators\category_validator.py", line 38, in validate_category_description
    raise shared_validator.ValidationException(f"Category description must be less than {MAX_DESCRIPTION_LENGTH} characters long")
          │                └ <class 'app.validators.shared_validator.ValidationException'>
          └ <module 'app.validators.shared_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\v...

app.validators.shared_validator.ValidationException: Category description must be less than 255 characters long
2024-11-07 21:27:38.944 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:27:38.945 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:27:38.946 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:27:38.947 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:27:38.948 | WARNING  | app.validators.category_validator:validate_category_name:20 - Category name length out of bounds, provided category_name: Kategorija19999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
2024-11-07 21:27:38.950 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: Category name must be between 4 and 50 characters long
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000021077534860>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002107CD2CA40>
    └ <WorkerThread(AnyIO worker thread, started 33424)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000002107CC82F20>, db=<sqlalchemy.orm.session.Session object at 0x000002107C...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002107CE86C40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 72, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija1999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999...
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000002107CE94F50>
           │                └ <function create_category at 0x000002107B93A520>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 13, in create_category
    category_validator.validate_category_name(category_name=category.name)
    │                  │                                    │        └ 'Kategorija199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999...
    │                  │                                    └ CategoryCreate(name='Kategorija1999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999...
    │                  └ <function validate_category_name at 0x000002107B93A8E0>
    └ <module 'app.validators.category_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\validators\category_validator.py", line 21, in validate_category_name
    raise shared_validator.ValidationException(f"Category name must be between {MIN_CATEGORY_NAME_LENGTH} and {MAX_CATEGORY_NAME_LENGTH} characters long")
          │                └ <class 'app.validators.shared_validator.ValidationException'>
          └ <module 'app.validators.shared_validator' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\v...

app.validators.shared_validator.ValidationException: Category name must be between 4 and 50 characters long
2024-11-07 21:27:45.252 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 21:27:45.253 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 21:27:45.253 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:27:45.254 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:27:45.254 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 21:27:45.254 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 21:27:45.255 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 21:27:45.255 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 21:27:45.255 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 21:27:45.257 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 21:27:45.259 | INFO     | app.crud.category_crud:create_category:32 - Attempting to create user session
2024-11-07 21:27:45.259 | INFO     | app.crud.category_crud:create_category:35 - Category prepared for creation, waiting for transaction commit
2024-11-07 21:27:45.263 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 22:39:47.210 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:39:47.210 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:39:47.211 | ERROR    | app.crud.category_crud:get_all_categories:57 - Exception: 'Session' object has no attribute 'get_all_categories'
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001BE4B2C4860>
    └ <WorkerThread(AnyIO worker thread, started 30128)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001BE50AD0C20>
    └ <WorkerThread(AnyIO worker thread, started 30128)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000001BE50A234C0>, db=<sqlalchemy.orm.session.Session object at 0x000001BE50...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001BE50A6D180>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>
           │                └ <function get_categories at 0x000001BE506AA660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>
                 │             └ <function get_all_categories at 0x000001BE506AA7A0>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 51, in get_all_categories
    categories = db.get_all_categories(db=db)
                 │                        └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>
                 └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>

AttributeError: 'Session' object has no attribute 'get_all_categories'
2024-11-07 22:39:47.239 | ERROR    | app.services.category_service:get_categories:53 - 
CATEGORIES HAVE NOT BEEN PARSED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 51, in get_all_categories
    categories = db.get_all_categories(db=db)
                 │                        └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>
                 └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>

AttributeError: 'Session' object has no attribute 'get_all_categories'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001BE4B2C4860>
    └ <WorkerThread(AnyIO worker thread, started 30128)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001BE50AD0C20>
    └ <WorkerThread(AnyIO worker thread, started 30128)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000001BE50A234C0>, db=<sqlalchemy.orm.session.Session object at 0x000001BE50...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001BE50A6D180>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>
           │                └ <function get_categories at 0x000001BE506AA660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000001BE50A3F710>
                 │             └ <function get_all_categories at 0x000001BE506AA7A0>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 58, in get_all_categories
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 22:43:26.831 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:43:26.832 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:43:26.833 | ERROR    | app.crud.category_crud:get_all_categories:57 - Exception: 'Session' object has no attribute 'get_all_categories'
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000023ED3594860>
    └ <WorkerThread(AnyIO worker thread, started 3032)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000023ED8E20C20>
    └ <WorkerThread(AnyIO worker thread, started 3032)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x0000023ED8D734C0>, db=<sqlalchemy.orm.session.Session object at 0x0000023ED8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000023ED8DCB940>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>
           │                └ <function get_categories at 0x0000023ED7A2A660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>
                 │             └ <function get_all_categories at 0x0000023ED7A2A7A0>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 51, in get_all_categories
    categories = db.get_all_categories(db=db)
                 │                        └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>
                 └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>

AttributeError: 'Session' object has no attribute 'get_all_categories'
2024-11-07 22:43:26.840 | ERROR    | app.services.category_service:get_categories:53 - 
CATEGORIES HAVE NOT BEEN PARSED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 51, in get_all_categories
    categories = db.get_all_categories(db=db)
                 │                        └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>
                 └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>

AttributeError: 'Session' object has no attribute 'get_all_categories'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x0000023ED3594860>
    └ <WorkerThread(AnyIO worker thread, started 3032)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x0000023ED8E20C20>
    └ <WorkerThread(AnyIO worker thread, started 3032)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x0000023ED8D734C0>, db=<sqlalchemy.orm.session.Session object at 0x0000023ED8...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000023ED8DCB940>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>
           │                └ <function get_categories at 0x0000023ED7A2A660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x0000023ED8DE10D0>
                 │             └ <function get_all_categories at 0x0000023ED7A2A7A0>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 58, in get_all_categories
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 22:48:58.028 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:48:58.029 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:48:58.054 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 22:50:13.376 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:50:13.376 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:50:13.401 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 22:50:55.414 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:50:55.415 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:50:55.440 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 22:52:29.534 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:52:29.534 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:52:29.561 | ERROR    | app.crud.category_crud:get_all_categories:58 - Exception: 'Category' object is not subscriptable
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001C569BB4860>
    └ <WorkerThread(AnyIO worker thread, started 32220)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001C56F450D60>
    └ <WorkerThread(AnyIO worker thread, started 32220)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000001C56F3A34C0>, db=<sqlalchemy.orm.session.Session object at 0x000001C56C...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001C56F3FA0C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000001C56C53EF90>
           │                └ <function get_categories at 0x000001C56E05A660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000001C56C53EF90>
                 │             └ <function get_all_categories at 0x000001C56E05A840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x000001C56F5499D0>, <app.models.database.Category object at 0x000001C56F3CBE50>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x000001C56F5499D0>
                       └ <app.models.database.Category object at 0x000001C56F5499D0>

TypeError: 'Category' object is not subscriptable
2024-11-07 22:52:29.571 | ERROR    | app.services.category_service:get_categories:53 - 
CATEGORIES HAVE NOT BEEN PARSED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x000001C56F5499D0>, <app.models.database.Category object at 0x000001C56F3CBE50>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x000001C56F5499D0>
                       └ <app.models.database.Category object at 0x000001C56F5499D0>

TypeError: 'Category' object is not subscriptable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001C569BB4860>
    └ <WorkerThread(AnyIO worker thread, started 32220)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001C56F450D60>
    └ <WorkerThread(AnyIO worker thread, started 32220)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000001C56F3A34C0>, db=<sqlalchemy.orm.session.Session object at 0x000001C56C...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001C56F3FA0C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000001C56C53EF90>
           │                └ <function get_categories at 0x000001C56E05A660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000001C56C53EF90>
                 │             └ <function get_all_categories at 0x000001C56E05A840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 59, in get_all_categories
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 22:52:51.357 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:52:51.358 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:52:51.387 | ERROR    | app.crud.category_crud:get_all_categories:58 - Exception: 'Category' object is not subscriptable
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000002DE4BE44860>
    └ <WorkerThread(AnyIO worker thread, started 28440)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002DE51610D60>
    └ <WorkerThread(AnyIO worker thread, started 28440)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000002DE515634C0>, db=<sqlalchemy.orm.session.Session object at 0x000002DE4E...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002DE5157F300>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000002DE4E6FEF90>
           │                └ <function get_categories at 0x000002DE511EA660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000002DE4E6FEF90>
                 │             └ <function get_all_categories at 0x000002DE511EA840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x000002DE51709BD0>, <app.models.database.Category object at 0x000002DE51709C50>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x000002DE51709BD0>
                       └ <app.models.database.Category object at 0x000002DE51709BD0>

TypeError: 'Category' object is not subscriptable
2024-11-07 22:52:51.395 | ERROR    | app.services.category_service:get_categories:53 - 
CATEGORIES HAVE NOT BEEN PARSED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x000002DE51709BD0>, <app.models.database.Category object at 0x000002DE51709C50>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x000002DE51709BD0>
                       └ <app.models.database.Category object at 0x000002DE51709BD0>

TypeError: 'Category' object is not subscriptable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000002DE4BE44860>
    └ <WorkerThread(AnyIO worker thread, started 28440)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002DE51610D60>
    └ <WorkerThread(AnyIO worker thread, started 28440)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000002DE515634C0>, db=<sqlalchemy.orm.session.Session object at 0x000002DE4E...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002DE5157F300>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000002DE4E6FEF90>
           │                └ <function get_categories at 0x000002DE511EA660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000002DE4E6FEF90>
                 │             └ <function get_all_categories at 0x000002DE511EA840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 59, in get_all_categories
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 22:54:09.317 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:54:09.318 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:54:09.347 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 22:55:35.585 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:55:35.585 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:55:35.613 | ERROR    | app.crud.category_crud:get_all_categories:58 - Exception: 'Category' object is not subscriptable
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000192B4F34860>
    └ <WorkerThread(AnyIO worker thread, started 31928)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x00000192BA470C20>
    └ <WorkerThread(AnyIO worker thread, started 31928)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x00000192BA3C34C0>, db=<sqlalchemy.orm.session.Session object at 0x00000192BA...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x00000192BA3DFA00>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x00000192BA41BE90>
           │                └ <function get_categories at 0x00000192BA38A660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x00000192BA41BE90>
                 │             └ <function get_all_categories at 0x00000192BA38A840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x00000192BA8A5190>, <app.models.database.Category object at 0x00000192BA3D1C10>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x00000192BA8A5190>
                       └ <app.models.database.Category object at 0x00000192BA8A5190>

TypeError: 'Category' object is not subscriptable
2024-11-07 22:55:35.621 | ERROR    | app.services.category_service:get_categories:53 - 
CATEGORIES HAVE NOT BEEN PARSED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x00000192BA8A5190>, <app.models.database.Category object at 0x00000192BA3D1C10>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x00000192BA8A5190>
                       └ <app.models.database.Category object at 0x00000192BA8A5190>

TypeError: 'Category' object is not subscriptable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000192B4F34860>
    └ <WorkerThread(AnyIO worker thread, started 31928)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x00000192BA470C20>
    └ <WorkerThread(AnyIO worker thread, started 31928)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x00000192BA3C34C0>, db=<sqlalchemy.orm.session.Session object at 0x00000192BA...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x00000192BA3DFA00>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x00000192BA41BE90>
           │                └ <function get_categories at 0x00000192BA38A660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x00000192BA41BE90>
                 │             └ <function get_all_categories at 0x00000192BA38A840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 59, in get_all_categories
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 22:55:59.344 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:55:59.345 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:55:59.374 | ERROR    | app.crud.category_crud:get_all_categories:58 - Exception: 'Category' object is not subscriptable
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000002A0E8634860>
    └ <WorkerThread(AnyIO worker thread, started 29096)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002A0EDB70C20>
    └ <WorkerThread(AnyIO worker thread, started 29096)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000002A0EDAC34C0>, db=<sqlalchemy.orm.session.Session object at 0x000002A0ED...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002A0EDB03F40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000002A0EDB30590>
           │                └ <function get_categories at 0x000002A0ECABA660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000002A0EDB30590>
                 │             └ <function get_all_categories at 0x000002A0ECABA840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x000002A0EDFA51D0>, <app.models.database.Category object at 0x000002A0EDFA5250>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x000002A0EDFA51D0>
                       └ <app.models.database.Category object at 0x000002A0EDFA51D0>

TypeError: 'Category' object is not subscriptable
2024-11-07 22:55:59.382 | ERROR    | app.services.category_service:get_categories:53 - 
CATEGORIES HAVE NOT BEEN PARSED, EXCEPTION OCCURED: 500: An unexpected error occurred
Traceback (most recent call last):

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in get_all_categories
    categories_list = [category[0] for category in categories]
                                                   └ [<app.models.database.Category object at 0x000002A0EDFA51D0>, <app.models.database.Category object at 0x000002A0EDFA5250>, <a...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 52, in <listcomp>
    categories_list = [category[0] for category in categories]
                       │               └ <app.models.database.Category object at 0x000002A0EDFA51D0>
                       └ <app.models.database.Category object at 0x000002A0EDFA51D0>

TypeError: 'Category' object is not subscriptable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000002A0E8634860>
    └ <WorkerThread(AnyIO worker thread, started 29096)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000002A0EDB70C20>
    └ <WorkerThread(AnyIO worker thread, started 29096)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function list_categories at 0x000002A0EDAC34C0>, db=<sqlalchemy.orm.session.Session object at 0x000002A0ED...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000002A0EDB03F40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 79, in list_categories
    return category_service.get_categories(db=db)
           │                │                 └ <sqlalchemy.orm.session.Session object at 0x000002A0EDB30590>
           │                └ <function get_categories at 0x000002A0ECABA660>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 46, in get_categories
    categories = category_crud.get_all_categories(db=db)
                 │             │                     └ <sqlalchemy.orm.session.Session object at 0x000002A0EDB30590>
                 │             └ <function get_all_categories at 0x000002A0ECABA840>
                 └ <module 'app.crud.category_crud' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\crud\\cate...

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\crud\category_crud.py", line 59, in get_all_categories
    raise HTTPException(status_code=500, detail="An unexpected error occurred")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 500: An unexpected error occurred
2024-11-07 22:56:23.975 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 22:56:23.976 | INFO     | app.crud.category_crud:get_all_categories:50 - Attempting to parse all categories
2024-11-07 22:56:24.004 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:08:04.925 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:08:04.926 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:08:04.952 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:15:11.377 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:15:11.377 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:15:11.404 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:15:12.130 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:15:12.131 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:15:12.132 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:15:14.505 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:15:14.506 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:15:14.507 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:26:54.550 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:26:54.560 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:26:54.619 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:26:59.396 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:26:59.397 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:26:59.399 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:27:00.413 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:27:00.414 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:27:00.416 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:27:01.179 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:27:01.179 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:27:01.180 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:27:01.844 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:27:01.845 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:27:01.847 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:27:03.579 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:27:03.580 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:27:03.581 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:27:07.536 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 23:27:07.537 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:27:07.537 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:07.537 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:07.537 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:27:07.538 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:27:07.538 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:27:07.538 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:07.538 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:07.538 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:07.538 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:07.539 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:07.539 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:07.539 | INFO     | app.services.user_service:create_user:21 - GOT EMPTY USER ROLE, PROCEEDING FURTHER
2024-11-07 23:27:07.539 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 23:27:07.546 | INFO     | app.crud.user_crud:get_by_username_email_id:23 - Searching for user by email: firstUser56@gmail.com
2024-11-07 23:27:07.548 | INFO     | app.crud.user_crud:get_by_username_email_id:38 - User not found with given parameters
2024-11-07 23:27:07.548 | INFO     | app.crud.user_crud:create:71 - Attempting to create user
2024-11-07 23:27:07.548 | INFO     | app.crud.user_crud:create:86 - User prepared for creation, waiting for transaction commit
2024-11-07 23:27:07.558 | INFO     | app.validators.user_session_validator:validate_ip:7 - Validating user IP address
2024-11-07 23:27:07.559 | INFO     | app.validators.user_session_validator:validate_ip:21 - 127.0.0.1
2024-11-07 23:27:07.559 | INFO     | app.validators.user_session_validator:validate_ip:22 - User IP validation passed
2024-11-07 23:27:07.559 | INFO     | app.crud.user_session_crud:create:11 - Attempting to create user session
2024-11-07 23:27:07.560 | INFO     | app.crud.user_session_crud:create:20 - Session prepared for creation, waiting for transaction commit
2024-11-07 23:27:07.560 | INFO     | app.services.user_service:create_user:39 - 
USER ACCOUNT HAS BEEN CREATED
2024-11-07 23:27:11.937 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 23:27:11.938 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:27:11.938 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:11.938 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:11.939 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:27:11.939 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:27:11.939 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:27:11.939 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:11.939 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:11.939 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:11.940 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:11.940 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:11.940 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:11.940 | INFO     | app.services.user_service:create_user:21 - GOT EMPTY USER ROLE, PROCEEDING FURTHER
2024-11-07 23:27:11.940 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 23:27:11.941 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First56
2024-11-07 23:27:11.941 | WARNING  | app.services.user_service:create_user:28 - 
USER ACCOUNT CANNOT BE CREATED AS THERE IS AN EXISTING USER WITH THE SAME USERNAME OR EMAIL
2024-11-07 23:27:11.942 | ERROR    | app.services.user_service:create_user:45 - 
USER ACCOUNT HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Username or email already in use
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001ED08AD4860>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001ED0E2E0E00>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_user at 0x000001ED0E232480>, db=<sqlalchemy.orm.session.Session object at 0x000001ED0B1C77...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001ED0E25A3C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 37, in create_user
    return user_service.create_user(db=db, request=request, user=user)
           │            │              │           │             └ UserCreate(username='First56', email='firstUser56@gmail.com', password='Password1234$', role=None)
           │            │              │           └ <starlette.requests.Request object at 0x000001ED0E3D84D0>
           │            │              └ <sqlalchemy.orm.session.Session object at 0x000001ED0B1C7790>
           │            └ <function create_user at 0x000001ED0CDA4860>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 29, in create_user
    raise HTTPException(status_code=409, detail="Username or email already in use")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Username or email already in use
2024-11-07 23:27:13.238 | INFO     | app.services.user_service:create_user:12 - 
CREATING USER ACCOUNT
2024-11-07 23:27:13.239 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:27:13.239 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:13.239 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:13.240 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:27:13.240 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:27:13.240 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:27:13.241 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:13.241 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:13.241 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:13.241 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:13.241 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:13.241 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:13.242 | INFO     | app.services.user_service:create_user:21 - GOT EMPTY USER ROLE, PROCEEDING FURTHER
2024-11-07 23:27:13.242 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First56
2024-11-07 23:27:13.242 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First56
2024-11-07 23:27:13.242 | WARNING  | app.services.user_service:create_user:28 - 
USER ACCOUNT CANNOT BE CREATED AS THERE IS AN EXISTING USER WITH THE SAME USERNAME OR EMAIL
2024-11-07 23:27:13.242 | ERROR    | app.services.user_service:create_user:45 - 
USER ACCOUNT HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Username or email already in use
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001ED08AD4860>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001ED0E2E0E00>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_user at 0x000001ED0E232480>, db=<sqlalchemy.orm.session.Session object at 0x000001ED0E3C4F...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001ED0E3C62C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 37, in create_user
    return user_service.create_user(db=db, request=request, user=user)
           │            │              │           │             └ UserCreate(username='First56', email='firstUser56@gmail.com', password='Password1234$', role=None)
           │            │              │           └ <starlette.requests.Request object at 0x000001ED0E3F8AD0>
           │            │              └ <sqlalchemy.orm.session.Session object at 0x000001ED0E3C4F90>
           │            └ <function create_user at 0x000001ED0CDA4860>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 29, in create_user
    raise HTTPException(status_code=409, detail="Username or email already in use")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Username or email already in use
2024-11-07 23:27:17.126 | INFO     | app.services.user_service:get_user_account_data:53 - 
GETTING USER ACCOUNT DATA
2024-11-07 23:27:17.126 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:17.127 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:17.127 | INFO     | app.crud.user_crud:get_by_username_email_id:15 - Searching for user by username: First33
2024-11-07 23:27:17.128 | INFO     | app.crud.user_crud:get_by_username_email_id:19 - User found by username: First33
2024-11-07 23:27:17.128 | INFO     | app.services.user_service:get_user_account_data:61 - 
USER ACCOUNT DATA HAS BEEN PARSED
2024-11-07 23:27:28.880 | INFO     | app.services.user_service:update_user:71 - 
UPDATING USER ACCOUNT DATA
2024-11-07 23:27:28.881 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:27:28.881 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:28.881 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:28.881 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:27:28.881 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:27:28.882 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:27:28.882 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:28.882 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:28.882 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:28.882 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:28.882 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:28.882 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:28.883 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:28.883 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:28.883 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:28.883 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:28.883 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:28.883 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:28.883 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 23:27:28.884 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 23:27:28.885 | INFO     | app.crud.user_crud:update:99 - Attempting to edit user account data
2024-11-07 23:27:28.886 | INFO     | app.crud.user_crud:get_by_username_email_id:31 - Searching for user by id: 86
2024-11-07 23:27:28.887 | INFO     | app.crud.user_crud:get_by_username_email_id:35 - User found by id: 86
2024-11-07 23:27:28.888 | INFO     | app.crud.user_crud:update:108 - User prepared for password change, waiting for transaction commit
2024-11-07 23:27:28.888 | INFO     | app.crud.user_crud:update:113 - User prepared for email change, waiting for transaction commit
2024-11-07 23:27:28.894 | INFO     | app.services.user_service:update_user:107 - SUCCESFULLY UPDATED USER ACCOUNT DATA
2024-11-07 23:27:47.219 | INFO     | app.services.user_service:update_user:71 - 
UPDATING USER ACCOUNT DATA
2024-11-07 23:27:47.220 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:27:47.220 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:47.220 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:47.220 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:27:47.220 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:27:47.220 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:27:47.221 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:47.221 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:47.221 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:47.221 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:47.221 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:47.221 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:47.221 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:47.221 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:47.222 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:47.222 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:47.222 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:47.222 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:47.222 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 23:27:47.222 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 23:27:47.223 | WARNING  | app.services.user_service:update_user:99 - CANNOT UPDATE USER ACCOUNT DATA - USER WITH PROVIDED CREDENTIALS NOT FOUND
2024-11-07 23:27:47.224 | ERROR    | app.services.user_service:update_user:111 - 
USER ACCOUNT HAS NOT BEEN CHANGED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001ED08AD4860>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001ED0E2E0E00>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function update_user_credentials at 0x000001ED0E232C00>, db=<sqlalchemy.orm.session.Session object at 0x00...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001ED0E24FF40>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 53, in update_user_credentials
    return user_service.update_user(db=db, username=username, data=data)
           │            │              │            │              └ UserUpdatePassword(email='firstUser56@gmail.comcs', password='Password1234$$', new_email='firstUser56@gmail.com', new_passwor...
           │            │              │            └ 'First56'
           │            │              └ <sqlalchemy.orm.session.Session object at 0x000001ED0E242E50>
           │            └ <function update_user at 0x000001ED0CEEA340>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 100, in update_user
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 23:27:52.284 | INFO     | app.services.user_service:update_user:71 - 
UPDATING USER ACCOUNT DATA
2024-11-07 23:27:52.285 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:27:52.285 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:52.285 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:52.286 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:27:52.286 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:27:52.286 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:27:52.286 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:52.287 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:52.287 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:52.287 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:52.287 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:52.287 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:52.287 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:27:52.287 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:27:52.288 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:27:52.288 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:27:52.288 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:27:52.288 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:27:52.288 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 23:27:52.288 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 23:27:52.290 | INFO     | app.crud.user_crud:update:99 - Attempting to edit user account data
2024-11-07 23:27:52.290 | INFO     | app.crud.user_crud:get_by_username_email_id:31 - Searching for user by id: 86
2024-11-07 23:27:52.291 | INFO     | app.crud.user_crud:get_by_username_email_id:35 - User found by id: 86
2024-11-07 23:27:52.291 | INFO     | app.crud.user_crud:update:108 - User prepared for password change, waiting for transaction commit
2024-11-07 23:27:52.291 | INFO     | app.crud.user_crud:update:113 - User prepared for email change, waiting for transaction commit
2024-11-07 23:27:52.293 | INFO     | app.services.user_service:update_user:107 - SUCCESFULLY UPDATED USER ACCOUNT DATA
2024-11-07 23:28:01.755 | INFO     | app.services.user_service:remove_user:119 - 
REMOVING USER ACCOUNT
2024-11-07 23:28:01.756 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:28:01.756 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:01.757 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:01.757 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:28:01.758 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:28:01.758 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:28:01.758 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:28:01.758 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:01.758 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:01.758 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:28:01.759 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:28:01.759 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:28:01.759 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 23:28:01.759 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 23:28:01.760 | INFO     | app.crud.user_crud:delete:131 - Attempting to remove user account
2024-11-07 23:28:01.763 | INFO     | app.crud.user_crud:delete:139 - User prepared for account removal, waiting for transaction commit
2024-11-07 23:28:01.784 | INFO     | app.services.user_service:remove_user:136 - 
USER ACCOUNT REMOVED
2024-11-07 23:28:12.388 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 23:28:12.389 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 23:28:12.389 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:12.389 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:12.389 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 23:28:12.389 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 23:28:12.389 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:12.389 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:12.390 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 23:28:12.390 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 23:28:12.392 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001ED08AD4860>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001ED0E2E0E00>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001ED0E233100>, db=<sqlalchemy.orm.session.Session object at 0x000001ED0E...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001ED0E27DF80>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 71, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija19', description='Kategorijos aprasymas.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001ED0E24FED0>
           │                └ <function create_category at 0x000001ED0CEEA5C0>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 23:28:23.549 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 23:28:23.550 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 23:28:23.550 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:23.550 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:23.550 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 23:28:23.551 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 23:28:23.551 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:23.551 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:23.551 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 23:28:23.551 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 23:28:23.552 | INFO     | app.crud.category_crud:create_category:33 - Attempting to create user session
2024-11-07 23:28:23.553 | INFO     | app.crud.category_crud:create_category:38 - Category prepared for creation, waiting for transaction commit
2024-11-07 23:28:23.557 | INFO     | app.services.category_service:create_category:33 - 
CATEGORY HAS BEEN CREATED
2024-11-07 23:28:52.861 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 23:28:52.862 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 23:28:52.862 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:52.862 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:52.862 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 23:28:52.863 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 23:28:52.863 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:28:52.863 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:28:52.863 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 23:28:52.863 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 23:28:52.864 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001ED08AD4860>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001ED0E2E0E00>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001ED0E233100>, db=<sqlalchemy.orm.session.Session object at 0x000001ED0E...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001ED0E46EBC0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 71, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija20', description='Kategorijos aprasymas.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001ED0E5B3290>
           │                └ <function create_category at 0x000001ED0CEEA5C0>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 23:29:04.653 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:29:04.653 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:29:04.654 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:29:05.813 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:29:05.814 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:29:05.814 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:29:08.019 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:29:08.019 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:29:08.019 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
2024-11-07 23:29:18.349 | INFO     | app.services.user_service:remove_user:119 - 
REMOVING USER ACCOUNT
2024-11-07 23:29:18.351 | INFO     | app.validators.user_validator:validate_username:18 - Validating username format
2024-11-07 23:29:18.351 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:29:18.351 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:29:18.351 | INFO     | app.validators.shared_validator:letters_numbers_only:17 - Validating input
2024-11-07 23:29:18.351 | INFO     | app.validators.shared_validator:letters_numbers_only:23 - Input passed validation
2024-11-07 23:29:18.351 | INFO     | app.validators.user_validator:validate_username:32 - Username validation passed
2024-11-07 23:29:18.351 | INFO     | app.validators.user_validator:validate_email:40 - Validating email format
2024-11-07 23:29:18.352 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:29:18.352 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:29:18.352 | INFO     | app.validators.user_validator:validate_email:55 - Email validation passed
2024-11-07 23:29:18.352 | INFO     | app.validators.user_validator:validate_password:63 - Validating password format
2024-11-07 23:29:18.352 | INFO     | app.validators.user_validator:validate_password:90 - Password validation passed
2024-11-07 23:29:18.352 | INFO     | app.crud.user_crud:get_authenticated_user:52 - Searching for user by specified username, email and password_hash
2024-11-07 23:29:18.353 | INFO     | app.crud.user_crud:get_authenticated_user:56 - User found
2024-11-07 23:29:18.354 | WARNING  | app.services.user_service:remove_user:130 - CANNOT REMOVE USER ACCOUNT - USER WITH PROVIDED CREDENTIALS NOT FOUND
2024-11-07 23:29:18.354 | ERROR    | app.services.user_service:remove_user:139 - 
USER ACCOUNT HAS NOT BEEN REMOVED, EXCEPTION OCCURED: 404: User not found
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001ED08AD4860>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001ED0E2E0E00>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function delete_user at 0x000001ED0E232E80>, db=<sqlalchemy.orm.session.Session object at 0x000001ED0E3DF1...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001ED0E4588C0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 61, in delete_user
    return user_service.remove_user(db=db, username=username, data=data)
           │            │              │            │              └ UserDelete(email='firstUser56@gmail.com', password='Password1234$')
           │            │              │            └ 'First56'
           │            │              └ <sqlalchemy.orm.session.Session object at 0x000001ED0E3DF150>
           │            └ <function remove_user at 0x000001ED0CEEA3E0>
           └ <module 'app.services.user_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\service...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\user_service.py", line 131, in remove_user
    raise HTTPException(status_code=404, detail="User not found")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 404: User not found
2024-11-07 23:29:27.432 | INFO     | app.services.category_service:create_category:12 - 
CREATING CATEGORY
2024-11-07 23:29:27.433 | INFO     | app.validators.category_validator:validate_category_name:12 - Validating category name
2024-11-07 23:29:27.433 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:29:27.433 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:29:27.433 | INFO     | app.validators.category_validator:validate_category_name:23 - Category name validation passed
2024-11-07 23:29:27.434 | INFO     | app.validators.category_validator:validate_category_description:31 - Validating category description
2024-11-07 23:29:27.434 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:29 - Validating input
2024-11-07 23:29:27.434 | INFO     | app.validators.shared_validator:validate_sql_malicious_input:60 - Input passed validation
2024-11-07 23:29:27.434 | INFO     | app.validators.category_validator:validate_category_description:40 - Category description validation passed
2024-11-07 23:29:27.434 | INFO     | app.crud.category_crud:get_category_by_name:11 - Searching for category
2024-11-07 23:29:27.436 | ERROR    | app.services.category_service:create_category:37 - 
CATEGORY HAS NOT BEEN CREATED, EXCEPTION OCCURED: 409: Category already exists
Traceback (most recent call last):

  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1002, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001ED08AD4860>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1045, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x000001ED0E2E0E00>
    └ <WorkerThread(AnyIO worker thread, started 15728)>
  File "C:\Users\tomas\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_category at 0x000001ED0E233100>, db=<sqlalchemy.orm.session.Session object at 0x000001ED0E...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x000001ED0E5CAFC0>

  File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\main.py", line 71, in create_category
    return category_service.create_category(db=db, category=category)
           │                │                  │            └ CategoryCreate(name='Kategorija20', description='Kategorijos aprasymas.')
           │                │                  └ <sqlalchemy.orm.session.Session object at 0x000001ED0E5C9590>
           │                └ <function create_category at 0x000001ED0CEEA5C0>
           └ <module 'app.services.category_service' from 'C:\\Users\\tomas\\Documents\\Saityno Progr. Projektavimas\\StreamaBit\\app\\ser...

> File "C:\Users\tomas\Documents\Saityno Progr. Projektavimas\StreamaBit\app\services\category_service.py", line 23, in create_category
    raise HTTPException(status_code=409, detail="Category already exists")
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 409: Category already exists
2024-11-07 23:29:41.358 | INFO     | app.services.category_service:get_categories:45 - \PARSING ALL CATEGORIES
2024-11-07 23:29:41.358 | INFO     | app.crud.category_crud:get_all_categories:54 - Attempting to parse all categories
2024-11-07 23:29:41.359 | INFO     | app.services.category_service:get_categories:50 - \CATEGORIES PARSED SUCCESSFULLY
